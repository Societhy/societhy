<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: ocLazyLoad [![Build Status](https://travis-ci.org/ocombe/ocLazyLoad.svg)](https://travis-ci.org/ocombe/ocLazyLoad)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ocLazyLoad [![Build Status](<a href="https://travis-ci.org/ocombe/ocLazyLoad.svg">https://travis-ci.org/ocombe/ocLazyLoad.svg</a>)](<a href="https://travis-ci.org/ocombe/ocLazyLoad">https://travis-ci.org/ocombe/ocLazyLoad</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Load modules on demand (lazy load) in AngularJS</p>
<h2>Table of contents</h2>
<ol type="1">
<li><a href="#key-features">Key features</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#service">Service</a></li>
<li><a href="#directive">Directive</a></li>
<li><a href="#bonus-use-dependency-injection">Dependency injection</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#works-well-with-your-router">Router usage</a></li>
<li><a href="#other-functions">Other function</a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#karma--unit-tests">Karma &amp; unit tests</a></li>
</ol>
<h2>Key features</h2>
<ul>
<li>Dependencies are automatically loaded</li>
<li>Debugger friendly (no eval code)</li>
<li>The ability to mix normal boot and load on demand</li>
<li>Load via the service or the directive</li>
<li>Use the embedded async loader or use your own (requireJS, ...)</li>
<li>Load js (angular or not) / css / templates files</li>
<li>Compatible with AngularJS 1.2.x and 1.3.x</li>
</ul>
<h2>Usage</h2>
<ul>
<li>Put ocLazyLoad.js into you project</li>
<li>Add the module <code>oc.lazyLoad</code> to your application (you can install it with <code>bower install oclazyload</code> or <code>npm install oclazyload</code>)</li>
<li>Load on demand: With $ocLazyLoad you can load angular modules, but if you want to load any component (controllers / services / filters / ...) without defining a new module it's entirely possible (just make sure that you define this component within an existing module).</li>
</ul>
<p>There are multiple ways to use <code>$ocLazyLoad</code> to load your files, just choose the one that fits you the best.</p>
<h6>More examples / tutorials / articles</h6>
<p>You can find three basic examples in the example folder. If you need more, check out these links:</p><ul>
<li>Lazy loading with requirejs, ocLazyLoad and ui-router: <a href="http://plnkr.co/edit/OGvi01?p=preview">using the templateProvider</a> / <a href="http://plnkr.co/edit/6CLDsz?p=preview">using the uiRouterDecorator</a> - by </li>
<li>Lazy Loading ui-router states with requirejs, ocLazyLoad and ui-router-extras futureStates, <a href="http://bardo.io/posts/oclazyload-future-states/">part 1</a> / <a href="http://bardo.io/posts/ng-deferred-bootstrap-like-with-oclazyload/">part 2</a> - by </li>
<li>Lazy loading Angular modules with ocLazyLoad, <a href="https://egghead.io/lessons/angularjs-lazy-loading-angular-modules-with-oclazyload">part 1</a> / <a href="https://egghead.io/lessons/angularjs-lazy-loading-modules-with-ui-router-and-oclazyload">part 2</a> / <a href="https://egghead.io/lessons/angularjs-simple-lazy-loaded-angular-module-syntax-with-oclazyload">part 3</a> / <a href="https://egghead.io/lessons/angularjs-lazy-loading-non-angular-libraries-with-oclazyload">part 4</a> - An AngularJS lesson by <a href="https://twitter.com/johnlindquist"></a> on <a href="https://egghead.io/">egghead.io</a></li>
</ul>
<h3>Service</h3>
<p>You can include <code>$ocLazyLoad</code> and use the function <code>load</code> which returns a promise. It supports a single dependency (object) or multiple dependencies (array of objects).</p>
<p>Load one or more modules &amp; components with one file: </p><div class="fragment"><div class="line">$ocLazyLoad.load(&#39;testModule.js&#39;);</div></div><!-- fragment --><p>Load one or more modules &amp; components with multiple files: </p><div class="fragment"><div class="line">$ocLazyLoad.load([&#39;testModule.js&#39;, &#39;testModuleCtrl.js&#39;, &#39;testModuleService.js&#39;]);</div></div><!-- fragment --><p>Load one or more modules with multiple files and specify a type where necessary: Note: When using the requireJS style formatting (with <code>js!</code> at the beginning for example), do not specify a file extension. Use one or the other. </p><div class="fragment"><div class="line">$ocLazyLoad.load([</div><div class="line">   &#39;testModule.js&#39;,</div><div class="line">   {type: &#39;css&#39;, path: &#39;testModuleCtrl&#39;},</div><div class="line">   {type: &#39;html&#39;, path: &#39;testModuleCtrl.html&#39;},</div><div class="line">   {type: &#39;js&#39;, path: &#39;testModuleCtrl&#39;},</div><div class="line">   &#39;js!testModuleService&#39;,</div><div class="line">   &#39;less!testModuleLessFile&#39;</div><div class="line">]);</div></div><!-- fragment --><p>You can also load external libs (not angular): </p><div class="fragment"><div class="line">$ocLazyLoad.load([&#39;testModule.js&#39;, &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;, &#39;anotherModule.js&#39;]);</div></div><!-- fragment --><p>You can also load css and template files: </p><div class="fragment"><div class="line">$ocLazyLoad.load([</div><div class="line">    &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;,</div><div class="line">    &#39;bower_components/bootstrap/dist/css/bootstrap.css&#39;,</div><div class="line">    &#39;partials/template1.html&#39;</div><div class="line">]);</div></div><!-- fragment --><p>If you want to load templates, the template file should be an html (or htm) file with regular <a href="https://docs.angularjs.org/api/ng/directive/script">script templates</a>. It looks like this: </p><div class="fragment"><div class="line">&lt;script type=&quot;text/ng-template&quot; id=&quot;/tpl.html&quot;&gt;</div><div class="line">  Content of the template.</div><div class="line">&lt;/script&gt;</div></div><!-- fragment --><p>You can put more than one template script in your template file, just make sure to use different ids: </p><div class="fragment"><div class="line">&lt;script type=&quot;text/ng-template&quot; id=&quot;/tpl1.html&quot;&gt;</div><div class="line">  Content of the first template.</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">&lt;script type=&quot;text/ng-template&quot; id=&quot;/tpl2.html&quot;&gt;</div><div class="line">  Content of the second template.</div><div class="line">&lt;/script&gt;</div></div><!-- fragment --><p>There are two ways to define config options for the load function. You can use a second optional parameter that will define configs for all the modules that you will load, or you can define optional parameters to each module. For example, these are equivalent: </p><div class="fragment"><div class="line">$ocLazyLoad.load([{</div><div class="line">  files: [&#39;testModule.js&#39;, &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;],</div><div class="line">  cache: false</div><div class="line">},{</div><div class="line">  files: [&#39;anotherModule.js&#39;],</div><div class="line">  cache: true</div><div class="line">}]);</div></div><!-- fragment --><p> And </p><div class="fragment"><div class="line">$ocLazyLoad.load(</div><div class="line">  [&#39;testModule.js&#39;, &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;, &#39;anotherModule.js&#39;],</div><div class="line">  {cache: false}</div><div class="line">);</div></div><!-- fragment --><p>If you load a template with the native template loader, you can use any parameter from the $http service (check: <a href="https://docs.angularjs.org/api/ng/service/$http#usage">https://docs.angularjs.org/api/ng/service/$http#usage</a>). </p><div class="fragment"><div class="line">$ocLazyLoad.load(</div><div class="line">    [&#39;partials/template1.html&#39;, &#39;partials/template2.html&#39;],</div><div class="line">    {cache: false, timeout: 5000}</div><div class="line">);</div></div><!-- fragment --><p>The existing parameters that you can use are <code>cache</code>, <code>reconfig</code>, <code>rerun</code>, <code>serie</code> and <code>insertBefore</code>. The parameter <code>cache: false</code> works for all native loaders (<b>all requests are cached by default</b>):</p>
<div class="fragment"><div class="line">$ocLazyLoad.load({</div><div class="line">    cache: false,</div><div class="line">    files: [&#39;testModule.js&#39;, &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;]</div><div class="line">});</div></div><!-- fragment --><p>By default, if you reload a module, the config block won't be invoked again (because often it will lead to unexpected results). But if you really need to execute the config function again, use the parameter <code>reconfig: true</code>: </p><div class="fragment"><div class="line">$ocLazyLoad.load({</div><div class="line">    reconfig: true,</div><div class="line">    files: [&#39;testModule.js&#39;, &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;]</div><div class="line">});</div></div><!-- fragment --><p>The same problem might happen with run blocks, use <code>rerun: true</code> to rerun the run blocks: </p><div class="fragment"><div class="line">$ocLazyLoad.load({</div><div class="line">    rerun: true,</div><div class="line">    files: [&#39;testModule.js&#39;, &#39;bower_components/bootstrap/dist/js/bootstrap.js&#39;]</div><div class="line">});</div></div><!-- fragment --><p>By default the native loaders will load your files in parallel. If you need to load your files in serie, you can use <code>serie: true</code>: </p><div class="fragment"><div class="line">$ocLazyLoad.load({</div><div class="line">    serie: true,</div><div class="line">    files: [</div><div class="line">        &#39;bower_components/angular-strap/dist/angular-strap.js&#39;,</div><div class="line">        &#39;bower_components/angular-strap/dist/angular-strap.tpl.js&#39;</div><div class="line">    ]</div><div class="line">});</div></div><!-- fragment --><p>The files, by default, will be inserted before the last child of the <code>head</code> element. You can override this by using <code>insertBefore: 'cssSelector'</code>: </p><div class="fragment"><div class="line">$ocLazyLoad.load({</div><div class="line">    insertBefore: &#39;#load_css_before&#39;,</div><div class="line">    files: [&#39;bower_components/bootstrap/dist/css/bootstrap.css&#39;]</div><div class="line">});</div></div><!-- fragment --><h3>Directive</h3>
<p>The directive usage is very similar to the service. The main interest here is that the content will be included and compiled once your modules have been loaded. This means that you can use directives that will be lazy loaded inside the oc-lazy-load directive.</p>
<p>Use the same parameters as a service: </p><div class="fragment"><div class="line">&lt;div oc-lazy-load=&quot;{[&#39;js/testModule.js&#39;, &#39;partials/lazyLoadTemplate.html&#39;]}&quot;&gt;</div><div class="line">    // Use a directive from TestModule</div><div class="line">    &lt;test-directive&gt;&lt;/test-directive&gt;</div><div class="line">&lt;/div&gt;</div></div><!-- fragment --><p>You can use variables to store parameters: </p><div class="fragment"><div class="line">$scope.lazyLoadParams = [</div><div class="line">    &#39;js/testModule.js&#39;,</div><div class="line">    &#39;partials/lazyLoadTemplate.html&#39;</div><div class="line">];</div></div><!-- fragment --> <div class="fragment"><div class="line">&lt;div oc-lazy-load=&quot;lazyLoadParams&quot;&gt;&lt;/div&gt;</div></div><!-- fragment --><h3>Bonus: Use dependency injection</h3>
<p>As a convenience you can also load dependencies by placing a module definition in the dependency injection block of your module. This will only work for lazy loaded modules: </p><div class="fragment"><div class="line">angular.module(&#39;MyModule&#39;, [&#39;pascalprecht.translate&#39;, {</div><div class="line">  &#39;/components/TestModule/TestModule.js&#39;,</div><div class="line">  [</div><div class="line">    &#39;/components/bootstrap/css/bootstrap.css&#39;,</div><div class="line">    &#39;/components/bootstrap/js/bootstrap.js&#39;</div><div class="line">  ]</div><div class="line">]);</div></div><!-- fragment --><h2>Configuration</h2>
<p>You can configure the service provider <code>$ocLazyLoadProvider</code> in the config function of your application:</p>
<div class="fragment"><div class="line">angular.module(&#39;app&#39;).config([&#39;$ocLazyLoadProvider&#39;, function($ocLazyLoadProvider) {</div><div class="line">    $ocLazyLoadProvider.config({</div><div class="line">        ...</div><div class="line">    });</div><div class="line">}]);</div></div><!-- fragment --><p>The options are:</p><ul>
<li><code>jsLoader</code>: You can use your own async loader. The one provided with $ocLazyLoad is based on $script.js, but you can use requireJS or any other async loader that works with the following syntax: ```js $ocLazyLoadProvider.config({ jsLoader: function([Array of files], callback, params); }); ```</li>
<li><code>cssLoader</code>: You can also define your own css async loader. The rules and syntax are the same as jsLoader. ```js $ocLazyLoadProvider.config({ cssLoader: function([Array of files], callback, params); }); ```</li>
<li><code>templatesLoader</code>: You can use your template loader. It's similar to the <code>jsLoader</code> but it uses an optional config parameter ```js $ocLazyLoadProvider.config({ templatesLoader: function([Array of files], callback, params); }); ```</li>
<li><code>debug</code>: $ocLazyLoad returns a promise that can be rejected if there is an error. If you set debug to true, $ocLazyLoad will also log all errors to the console. ```js $ocLazyLoadProvider.config({ debug: true }); ```</li>
<li><code>events</code>: $ocLazyLoad can broadcast an event when you load a module, a component and a file (js/css/template). It is disabled by default, set events to true to activate it. The events are <code>ocLazyLoad.moduleLoaded</code>, <code>ocLazyLoad.moduleReloaded</code>, <code>ocLazyLoad.componentLoaded</code>, <code>ocLazyLoad.fileLoaded</code>. ```js $ocLazyLoadProvider.config({ events: true }); <code> </code>js $scope.$on('ocLazyLoad.moduleLoaded', function(e, module) { console.log('module loaded', module); }); ```</li>
<li><code>modules</code>: predefine the configuration of your modules for a later use. You will have to specify the name of the module here so that we can find the reference later. ```js $ocLazyLoadProvider.config({ modules: [{ name: 'TestModule', files: ['js/TestModule.js'] }] }); <code> </code>js $ocLazyLoad.load('TestModule'); ```</li>
</ul>
<h2>Works well with your router</h2>
<p><code>$ocLazyLoad</code> works well with routers and especially <a href="https://github.com/angular-ui/ui-router">ui-router</a>. Since it returns a promise, use the <a href="https://github.com/angular-ui/ui-router/wiki#resolve">resolve property</a> to make sure that your components are loaded before the view is resolved: </p><div class="fragment"><div class="line">$stateProvider.state(&#39;index&#39;, {</div><div class="line">    url: &quot;/&quot;, // root route</div><div class="line">    views: {</div><div class="line">        &quot;lazyLoadView&quot;: {</div><div class="line">            controller: &#39;AppCtrl&#39;, // This view will use AppCtrl loaded below in the resolve</div><div class="line">            templateUrl: &#39;partials/main.html&#39;</div><div class="line">        }</div><div class="line">    },</div><div class="line">    resolve: { // Any property in resolve should return a promise and is executed before the view is loaded</div><div class="line">        loadMyCtrl: [&#39;$ocLazyLoad&#39;, function($ocLazyLoad) {</div><div class="line">            // you can lazy load files for an existing module</div><div class="line">             return $ocLazyLoad.load(&#39;js/AppCtrl.js&#39;);</div><div class="line">        }]</div><div class="line">    }</div><div class="line">});</div></div><!-- fragment --><p>If you have nested views, make sure to include the resolve from the parent to load your components in the right order: </p><div class="fragment"><div class="line">$stateProvider.state(&#39;parent&#39;, {</div><div class="line">    url: &quot;/&quot;,</div><div class="line">    resolve: {</div><div class="line">        loadMyService: [&#39;$ocLazyLoad&#39;, function($ocLazyLoad) {</div><div class="line">             return $ocLazyLoad.load(&#39;js/ServiceTest.js&#39;);</div><div class="line">        }]</div><div class="line">    }</div><div class="line">})</div><div class="line">.state(&#39;parent.child&#39;, {</div><div class="line">    resolve: {</div><div class="line">        test: [&#39;loadMyService&#39;, &#39;$ServiceTest&#39;, function(loadMyService, $ServiceTest) {</div><div class="line">            // you can use your service</div><div class="line">            $ServiceTest.doSomething();</div><div class="line">        }]</div><div class="line">    }</div><div class="line">});</div></div><!-- fragment --><p>It also works for sibling resolves: </p><div class="fragment"><div class="line">$stateProvider.state(&#39;index&#39;, {</div><div class="line">    url: &quot;/&quot;,</div><div class="line">    resolve: {</div><div class="line">        loadMyService: [&#39;$ocLazyLoad&#39;, function($ocLazyLoad) {</div><div class="line">             return $ocLazyLoad.load(&#39;js/ServiceTest.js&#39;);</div><div class="line">        }],</div><div class="line">        test: [&#39;loadMyService&#39;, &#39;$serviceTest&#39;, function(loadMyService, $serviceTest) {</div><div class="line">            // you can use your service</div><div class="line">            $serviceTest.doSomething();</div><div class="line">        }]</div><div class="line">    }</div><div class="line">});</div></div><!-- fragment --><p>Of course, if you want to use the loaded files immediately, you don't need to define two resolves, you can also use the injector (it works anywhere, not just in the router): </p><div class="fragment"><div class="line">$stateProvider.state(&#39;index&#39;, {</div><div class="line">  url: &quot;/&quot;,</div><div class="line">  resolve: {</div><div class="line">    loadMyService: [&#39;$ocLazyLoad&#39;, &#39;$injector&#39;, function($ocLazyLoad, $injector) {</div><div class="line">      return $ocLazyLoad.load(&#39;js/ServiceTest.js&#39;).then(function() {</div><div class="line">        var $serviceTest = $injector.get(&quot;$serviceTest&quot;);</div><div class="line">        $serviceTest.doSomething();</div><div class="line">      });</div><div class="line">    }]</div><div class="line">  }</div><div class="line">});</div></div><!-- fragment --><h2>Other functions</h2>
<p><code>$ocLazyLoad</code> provides a few other functions that might help you in a few specific cases:</p>
<ul>
<li><code>setModuleConfig(moduleConfig)</code>: Lets you define a module config object</li>
<li><code>getModuleConfig(moduleName)</code>: Lets you get a module config object</li>
<li><code>getModules()</code>: Returns the list of loaded modules</li>
<li><code>isLoaded(modulesNames)</code>: Lets you check if a module (or a list of modules) has been loaded into Angular or not</li>
</ul>
<h2>Contribute</h2>
<p>If you want to get started and the docs are not enough, see the examples in the 'examples' folder!</p>
<p>If you want to contribute, it would be really awesome to add some tests, or more examples :) </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
