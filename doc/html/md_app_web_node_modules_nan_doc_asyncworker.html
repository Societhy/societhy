<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Asynchronous work helpers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Asynchronous work helpers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><code><a class="el" href="class_nan_1_1_async_worker.html">Nan::AsyncWorker</a></code> and <code>Nan::AsyncProgressWorker</code> are helper classes that make working with asynchronous code easier.</p>
<ul>
<li><a href="#api_nan_async_worker"><b><code>Nan::AsyncWorker</code></b></a></li>
<li><a href="#api_nan_async_progress_worker"><b><code>Nan::AsyncProgressWorker</code></b></a></li>
<li><a href="#api_nan_async_queue_worker"><b><code>Nan::AsyncQueueWorker</code></b></a></li>
</ul>
<p><a class="anchor" id="api_nan_async_worker"></a> </p><h3><a class="el" href="class_nan_1_1_async_worker.html">Nan::AsyncWorker</a></h3>
<p><code><a class="el" href="class_nan_1_1_async_worker.html">Nan::AsyncWorker</a></code> is an <em>abstract</em> class that you can subclass to have much of the annoying asynchronous queuing and handling taken care of for you. It can even store arbitrary V8 objects for you and have them persist while the asynchronous work is in progress.</p>
<p>Definition:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">class AsyncWorker {</div><div class="line"> public:</div><div class="line">  explicit AsyncWorker(Callback *callback_);</div><div class="line"></div><div class="line">  virtual ~AsyncWorker();</div><div class="line"></div><div class="line">  virtual void WorkComplete();</div><div class="line"></div><div class="line">  void SaveToPersistent(const char *key, const v8::Local&lt;v8::Value&gt; &amp;value);</div><div class="line"></div><div class="line">  void SaveToPersistent(const v8::Local&lt;v8::String&gt; &amp;key,</div><div class="line">                        const v8::Local&lt;v8::Value&gt; &amp;value);</div><div class="line"></div><div class="line">  void SaveToPersistent(uint32_t index,</div><div class="line">                        const v8::Local&lt;v8::Value&gt; &amp;value);</div><div class="line"></div><div class="line">  v8::Local&lt;v8::Value&gt; GetFromPersistent(const char *key) const;</div><div class="line"></div><div class="line">  v8::Local&lt;v8::Value&gt; GetFromPersistent(const v8::Local&lt;v8::String&gt; &amp;key) const;</div><div class="line"></div><div class="line">  v8::Local&lt;v8::Value&gt; GetFromPersistent(uint32_t index) const;</div><div class="line"></div><div class="line">  virtual void Execute() = 0;</div><div class="line"></div><div class="line">  uv_work_t request;</div><div class="line"></div><div class="line">  virtual void Destroy();</div><div class="line"></div><div class="line"> protected:</div><div class="line">  Persistent&lt;v8::Object&gt; persistentHandle;</div><div class="line"></div><div class="line">  Callback *callback;</div><div class="line"></div><div class="line">  virtual void HandleOKCallback();</div><div class="line"></div><div class="line">  virtual void HandleErrorCallback();</div><div class="line"></div><div class="line">  void SetErrorMessage(const char *msg);</div><div class="line"></div><div class="line">  const char* ErrorMessage();</div><div class="line">};</div></div><!-- fragment --><p><a class="anchor" id="api_nan_async_progress_worker"></a> </p><h3><a class="el" href="class_nan_1_1_async_progress_worker_base.html">Nan::AsyncProgressWorkerBase</a> &amp; Nan::AsyncProgressWorker</h3>
<p><code><a class="el" href="class_nan_1_1_async_progress_worker_base.html">Nan::AsyncProgressWorkerBase</a></code> is an <em>abstract</em> class template that extends <code><a class="el" href="class_nan_1_1_async_worker.html">Nan::AsyncWorker</a></code> and adds additional progress reporting callbacks that can be used during the asynchronous work execution to provide progress data back to JavaScript.</p>
<p>Previously the definiton of <code>Nan::AsyncProgressWorker</code> only allowed sending <code>const char</code> data. Now extending <code>Nan::AsyncProgressWorker</code> will yield an instance of the implicit <code><a class="el" href="class_nan_1_1_async_progress_worker_base.html">Nan::AsyncProgressWorkerBase</a></code> template with type <code>&lt;char&gt;</code> for compatibility.</p>
<p>Definition:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">template&lt;class T&gt;</div><div class="line">class AsyncProgressWorkerBase&lt;T&gt; : public AsyncWorker {</div><div class="line"> public:</div><div class="line">  explicit AsyncProgressWorker(Callback *callback_);</div><div class="line"></div><div class="line">  virtual ~AsyncProgressWorker();</div><div class="line"></div><div class="line">  void WorkProgress();</div><div class="line"></div><div class="line">  class ExecutionProgress {</div><div class="line">   public:</div><div class="line">    void Signal() const;</div><div class="line">    void Send(const T* data, size_t size) const;</div><div class="line">  };</div><div class="line"></div><div class="line">  virtual void Execute(const ExecutionProgress&amp; progress) = 0;</div><div class="line"></div><div class="line">  virtual void HandleProgressCallback(const T *data, size_t size) = 0;</div><div class="line"></div><div class="line">  virtual void Destroy();</div><div class="line"></div><div class="line">typedef AsyncProgressWorkerBase&lt;T&gt; AsyncProgressWorker;</div></div><!-- fragment --><p><a class="anchor" id="api_nan_async_queue_worker"></a> </p><h3>Nan::AsyncQueueWorker</h3>
<p><code>Nan::AsyncQueueWorker</code> will run a <code><a class="el" href="class_nan_1_1_async_worker.html">Nan::AsyncWorker</a></code> asynchronously via libuv. Both the <code>execute</code> and <code>after_work</code> steps are taken care of for you. Most of the logic for this is embedded in <code><a class="el" href="class_nan_1_1_async_worker.html">Nan::AsyncWorker</a></code>.</p>
<p>Definition:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">void AsyncQueueWorker(AsyncWorker *);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
