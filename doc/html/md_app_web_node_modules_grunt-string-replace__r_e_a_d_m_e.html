<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: grunt-string-replace [![Build Status](https://travis-ci.org/eruizdechavez/grunt-string-replace.svg)](https://travis-ci.org/eruizdechavez/grunt-string-replace)  [![Node Dependencies](https://david-dm.org/eruizdechavez/grunt-string-replace.svg)](https://david-dm.org/eruizdechavez/grunt-string-replace)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">grunt-string-replace [![Build Status](<a href="https://travis-ci.org/eruizdechavez/grunt-string-replace.svg">https://travis-ci.org/eruizdechavez/grunt-string-replace.svg</a>)](<a href="https://travis-ci.org/eruizdechavez/grunt-string-replace">https://travis-ci.org/eruizdechavez/grunt-string-replace</a>) [![Node Dependencies](<a href="https://david-dm.org/eruizdechavez/grunt-string-replace.svg">https://david-dm.org/eruizdechavez/grunt-string-replace.svg</a>)](<a href="https://david-dm.org/eruizdechavez/grunt-string-replace">https://david-dm.org/eruizdechavez/grunt-string-replace</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Replaces strings on files by using string or regex patterns. Attempts to be a <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11">String.prototype.replace</a> adapter task for your grunt project.</p>
<h2>Getting Started</h2>
<p>This plugin requires node <code>&gt;= 0.10.0</code>, Grunt <code>&gt;= 0.4.0</code> and npm <code>&gt;= 1.4.15</code> (latest stable is recommended).</p>
<p>If you haven't used <a href="http://gruntjs.com/">Grunt</a> before, be sure to check out the <a href="http://gruntjs.com/getting-started">Getting Started</a> guide, as it explains how to create a <a href="http://gruntjs.com/sample-gruntfile">Gruntfile</a> as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:</p>
<div class="fragment"><div class="line">npm install grunt-string-replace --save-dev</div></div><!-- fragment --><p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>
<div class="fragment"><div class="line">grunt.loadNpmTasks(&#39;grunt-string-replace&#39;);</div></div><!-- fragment --><p><em>If you're still using grunt v0.3.x it's strongly recommended that <a href="http://gruntjs.com/upgrading-from-0.3-to-0.4">you upgrade</a>, but in case you can't please use <a href="https://github.com/eruizdechavez/grunt-string-replace/tree/0.1.1-1">v0.1.1-1</a>.</em></p>
<h2>Configuration</h2>
<p>Inside your <code>Gruntfile.js</code> file add a section named <code>string-replace</code>. This section specifies the files to edit, destinations, patterns and replacements.</p>
<h3>Parameters</h3>
<h4>files <code>object</code></h4>
<p>Defines what files this task will edit. Grunt itself has very powerful <a href="http://gruntjs.com/configuring-tasks#files">abstractions</a>, so it is <b>highly recommended</b> you understand the different ways to specify them. Learn more at <a href="http://gruntjs.com/configuring-tasks#files">Gruntfile Files mapping</a>, some options incude compact format, files object format and files array format.</p>
<h4>options <code>object</code></h4>
<p>Controls how this task operates and should contain key:value pairs, see options below.</p>
<h5>options.saveUnchanged <code>boolean</code></h5>
<p>By default <code>true</code> this flag will instruct <code>grunt-string-replace</code> to copy the files on <code>options.replacements</code> patterns even if there are no replacing matches.</p>
<p>By setting this flag to <code>false</code> files that have not changed (no replacements done) will not be saved on the new location. This will speed up the task if there is a large number of files.</p>
<h5>options.replacements <code>array</code></h5>
<p>This option will hold all your pattern/replacement pairs. A pattern/replacement pair should contain key:value pairs containing:</p>
<ul>
<li>pattern <code>string</code> or <code>regex</code></li>
<li>replacement <code>string</code></li>
</ul>
<div class="fragment"><div class="line">options: {</div><div class="line">  replacements: [{</div><div class="line">    pattern: /\/(asdf|qwer)\//ig,</div><div class="line">    replacement: &#39;&quot;$1&quot;&#39;</div><div class="line">  }, {</div><div class="line">    pattern: &#39;,&#39;,</div><div class="line">    replacement: &#39;;&#39;</div><div class="line">  }]</div><div class="line">}</div></div><!-- fragment --><h3>Notes</h3>
<ul>
<li>If the pattern is a string, only the first occurrence will be replaced, as stated on <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11">String.prototype.replace</a>.</li>
<li>When using Grunt templates, be aware that some security checks are implemented by LoDash and may alter your content (mainly to avoid XSS). To avoid this, see the advanced example below.</li>
</ul>
<h2>Examples</h2>
<h3>Multiple files and multiple replacements</h3>
<div class="fragment"><div class="line">&#39;string-replace&#39;: {</div><div class="line">  dist: {</div><div class="line">    files: {</div><div class="line">      &#39;dest/&#39;: &#39;src/**&#39;,</div><div class="line">      &#39;prod/&#39;: [&#39;src/*.js&#39;, &#39;src/*.css&#39;],</div><div class="line">    },</div><div class="line">    options: {</div><div class="line">      replacements: [{</div><div class="line">        pattern: /\/(asdf|qwer)\//ig,</div><div class="line">        replacement: &#39;&#39;$1&#39;&#39;</div><div class="line">      }, {</div><div class="line">        pattern: &#39;,&#39;,</div><div class="line">        replacement: &#39;;&#39;</div><div class="line">      }]</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><h3>Simple inline content</h3>
<div class="fragment"><div class="line">&#39;string-replace&#39;: {</div><div class="line">  inline: {</div><div class="line">    files: {</div><div class="line">      &#39;dest/&#39;: &#39;src/**&#39;,</div><div class="line">    },</div><div class="line">    options: {</div><div class="line">      replacements: [</div><div class="line">        // place files inline example</div><div class="line">        {</div><div class="line">          pattern: &#39;&lt;script src=&#39;js/async.min.js&#39;&gt;&lt;/script&gt;&#39;,</div><div class="line">          replacement: &#39;&lt;script&gt;&lt;%= grunt.file.read(&#39;path/to/source/js/async.min.js&#39;) %&gt;&lt;/script&gt;&#39;</div><div class="line">        }</div><div class="line">      ]</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><h3>Using files' expand options</h3>
<p>For more details, see Grunt's documentation about <a href="http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically">dynamic files object</a>.</p>
<div class="fragment"><div class="line">&#39;string-replace&#39;: {</div><div class="line">  dist: {</div><div class="line">    files: [{</div><div class="line">      expand: true,</div><div class="line">      cwd: &#39;src/&#39;,</div><div class="line">      src: &#39;**/*&#39;,</div><div class="line">      dest: &#39;dist/&#39;</div><div class="line">    }],</div><div class="line">    options: {</div><div class="line">      replacements: [{</div><div class="line">        pattern: &#39;hello&#39;,</div><div class="line">        replacement: &#39;howdy&#39;</div><div class="line">      }]</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><h3>Advanced inline</h3>
<p>Since grunt-string-replace is basically a wrapper of <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11">String.prototype.replace</a> you can also provide a function as a replacement pattern instead of a string or a template; as a nice added bonus to using a replacement function, grunt-string-replace will provide 2 extra arguments apart from the ones documented in the link below: <code>src</code> and <code>dest</code>. To get more details about how to use a function as replacement pattern I recommend you to read <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter">Specifying a function as a parameter</a>.</p>
<p>We will be reading file names from HTML comments and use the paths later to fetch the content and insert it inside a resulting HTML. Assuming the following setup:</p>
<p><em>src/index.html</em></p>
<div class="fragment"><div class="line">content here</div></div><!-- fragment --><p><em>src/partials/header.html</em></p>
<div class="fragment"><div class="line">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;</div></div><!-- fragment --><p><em>src/partials/footer.html</em></p>
<div class="fragment"><div class="line">&lt;/body&gt;&lt;/html&gt;</div></div><!-- fragment --><p><em>Gruntfile.js</em></p>
<div class="fragment"><div class="line">&#39;use strict&#39;;</div><div class="line"></div><div class="line">module.exports = function (grunt) {</div><div class="line">  // Project configuration.</div><div class="line">  grunt.initConfig({</div><div class="line">    config: {</div><div class="line">      src: &#39;src/*.html&#39;</div><div class="line">      dist: &#39;dist/&#39;</div><div class="line">    },</div><div class="line">    &#39;string-replace&#39;: {</div><div class="line">      dist: {</div><div class="line">        files: {</div><div class="line">          &#39;&lt;%= config.dist %&gt;&#39;: &#39;&lt;%= config.src %&gt;&#39;</div><div class="line">        },</div><div class="line">        options: {</div><div class="line">          replacements: [{</div><div class="line">            pattern: //ig,</div><div class="line">            replacement: function (match, p1) {</div><div class="line">              return grunt.file.read(grunt.config.get(&#39;config.dist&#39;) + p1);</div><div class="line">            }</div><div class="line">          }]</div><div class="line">        }</div><div class="line">      }</div><div class="line">    }</div><div class="line">  });</div><div class="line"></div><div class="line">  // These plugins provide necessary tasks.</div><div class="line">  grunt.loadNpmTasks(&#39;grunt-string-replace&#39;);</div><div class="line"></div><div class="line">  // Default task.</div><div class="line">  grunt.registerTask(&#39;default&#39;, [&#39;string-replace&#39;]);</div><div class="line">};</div></div><!-- fragment --><p>After executing grunt we get the following:</p>
<p><em>dist/index.html</em></p>
<div class="fragment"><div class="line">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;</div><div class="line">content here</div><div class="line">&lt;/body&gt;&lt;/html&gt;</div></div><!-- fragment --><h2>Contributing</h2>
<p>In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using <a href="http://gruntjs.com/">grunt</a>.</p>
<h2>Release History</h2>
<p>1.3.0</p><ul>
<li>Fix #39, a typo in the documentation</li>
<li>Inject src and dest into the callback function when replacement is a function; this allows the replacement function to use the old and/or new file paths/names for further processing</li>
<li>Add total files modified and update file created logging to verbose. Contributed by <a href="https://github.com/tHBp">tHBp</a></li>
</ul>
<p>1.2.1</p><ul>
<li>Update project URLs</li>
<li>Update dependencies</li>
</ul>
<p>1.2.0</p><ul>
<li>Add <code>saveUnchanged</code> option to control weather unmodified files are saved or not.</li>
<li>Add iojs to Travis CI.</li>
</ul>
<p>1.1.1</p><ul>
<li>Add Node.js v0.12 to Travis CI</li>
</ul>
<p>1.1.0</p><ul>
<li>Update dependencies</li>
<li>Add new log and debug messages</li>
<li>Improved file handling; grunt-string-replace will not copy files that are not modified (no replacements executed). Contributed by <a href="https://github.com/iabw">iabw</a></li>
</ul>
<p>1.0.0</p><ul>
<li>Update dependencies</li>
<li>Update README.md</li>
<li>Well deserved bump to 1.0.0 (its been stable for long enough now)</li>
</ul>
<p>0.2.8</p><ul>
<li>Added log message after file is succesfully created. Contributed by <a href="https://github.com/donaldpipowitch">donaldpipowitch</a></li>
<li>Do not report error if one of the replacements resolves to a folder</li>
</ul>
<p>0.2.7</p><ul>
<li>External libraries are deprecated on Grunt 0.4.2<ul>
<li>Remove grunt.util._ as it is not really required</li>
<li>Replace grunt.util.async with async</li>
</ul>
</li>
</ul>
<p>0.2.6</p><ul>
<li>Update Getting Started section</li>
<li>Fix broken link to Gruntfile's File section (#18)</li>
</ul>
<p>0.2.5</p><ul>
<li>Fix for #16</li>
<li>Fix for Travis CI config file</li>
<li>Added error handling to finish the task if something did not work as expected instead of just fail silently</li>
<li>Updated dev dependencies to latest stable versions</li>
</ul>
<p>0.2.4</p><ul>
<li>Asynchronously loop files. Original idea contributed by <a href="https://github.com/maxnachlinger">maxnachlinger</a></li>
<li>Inline replacing example on README.md. Contributed by <a href="https://github.com/willfarrell">willfarrell</a></li>
</ul>
<p>0.2.3</p><ul>
<li>Removed dependency with grunt-lib-contrib due to deprecation of 'options' method in favor of Grunt's 'options' util.</li>
<li>Updated grunt-contrib-jshint version in package.json to 0.3.0</li>
<li>Updated grunt-contrib-watch version in package.json to 0.3.1</li>
<li>Updated grunt version in package.json to 0.4.1</li>
<li>Added Node.js v0.10 to Travis CI config file</li>
</ul>
<p>0.2.2</p><ul>
<li>Added support to be used as npm module. Contributed by <a href="https://github.com/thanpolas">thanpolas</a>.</li>
</ul>
<p>0.2.1</p><ul>
<li>Updated dependencies for Grunt 0.4.0.</li>
</ul>
<p>0.2.0</p><ul>
<li>Added Support for grunt 0.4.0. This version will not support grunt 0.3.x, if you need to use it then <code>npm install grunt-string-replace@0.1</code>.</li>
</ul>
<p>0.1.1-1</p><ul>
<li>Added Clean task (and dev dependency) to remove test generated file before testing.</li>
<li>Added Sublime Text project files and test generated file to npm ignore list.</li>
</ul>
<p>0.1.1</p><ul>
<li>Fix dependency with grunt-lib-contrib.</li>
</ul>
<p>0.1.0-1</p><ul>
<li>Fixed a typo on package.json description.</li>
<li>Added a note about string pattern behavior.</li>
</ul>
<p>0.1.0</p><ul>
<li>Initial release.</li>
</ul>
<h2>License</h2>
<p>Copyright (c) 2016 Erick Ruiz de Chavez. Licensed under the MIT license. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
