<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: angular-socket-io [![Build Status](https://travis-ci.org/btford/angular-socket-io.svg)](https://travis-ci.org/btford/angular-socket-io)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">angular-socket-io [![Build Status](<a href="https://travis-ci.org/btford/angular-socket-io.svg">https://travis-ci.org/btford/angular-socket-io.svg</a>)](<a href="https://travis-ci.org/btford/angular-socket-io">https://travis-ci.org/btford/angular-socket-io</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Bower Component for using AngularJS with <a href="http://socket.io/">Socket.IO</a>, based on <a href="http://briantford.com/blog/angular-socket-io.html">this</a>.</p>
<h2>Install</h2>
<ol type="1">
<li><code>bower install angular-socket-io</code> or <a href="https://github.com/btford/angular-socket-io/archive/master.zip">download the zip</a>.</li>
<li>Make sure the Socket.IO client lib is loaded. It's often served at <code>/socket.io/socket.io.js</code>.</li>
<li>Include the <code>socket.js</code> script provided by this component into your app.</li>
<li>Add <code>btford.socket-io</code> as a module dependency to your app.</li>
</ol>
<h2>Usage</h2>
<p>This module exposes a <code>socketFactory</code>, which is an API for instantiating sockets that are integrated with Angular's digest cycle.</p>
<h3>Making a Socket Instance</h3>
<div class="fragment"><div class="line">// in the top-level module of the app</div><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;,</div><div class="line">  &#39;myApp.MyCtrl&#39;</div><div class="line">]).</div><div class="line">factory(&#39;mySocket&#39;, function (socketFactory) {</div><div class="line">  return socketFactory();</div><div class="line">});</div></div><!-- fragment --><p>With that, you can inject your <code>mySocket</code> service into controllers and other serivices within your application!</p>
<h3>Using Your Socket Instance</h3>
<p>Building on the example above:</p>
<div class="fragment"><div class="line">// in the top-level module of the app</div><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;,</div><div class="line">  &#39;myApp.MyCtrl&#39;</div><div class="line">]).</div><div class="line">factory(&#39;mySocket&#39;, function (socketFactory) {</div><div class="line">  return socketFactory();</div><div class="line">}).</div><div class="line">controller(&#39;MyCtrl&#39;, function (mySocket) {</div><div class="line">  // ...</div><div class="line">});</div></div><!-- fragment --><h2>API</h2>
<p>For the most part, this component works exactly like you would expect. The only API addition is <code>socket.forward</code>, which makes it easier to add/remove listeners in a way that works with <a href="http://docs.angularjs.org/api/ng.$rootScope.Scope">AngularJS's scope</a>.</p>
<h3><code>socket.on</code> / <code>socket.addListener</code></h3>
<p>Takes an event name and callback. Works just like the method of the same name from Socket.IO.</p>
<h3><code>socket.removeListener</code></h3>
<p>Takes an event name and callback. Works just like the method of the same name from Socket.IO.</p>
<h3><code>socket.removeAllListeners</code></h3>
<p>Takes an event name. Works just like the method of the same name from Socket.IO.</p>
<h3><code>socket.emit</code></h3>
<p>Sends a message to the server. Optionally takes a callback.</p>
<p>Works just like the method of the same name from Socket.IO.</p>
<h3><code>socket.forward</code></h3>
<p><code>socket.forward</code> allows you to forward the events received by Socket.IO's socket to AngularJS's event system. You can then listen to the event with <code>$scope.$on</code>. By default, socket-forwarded events are namespaced with <code>socket:</code>.</p>
<p>The first argument is a string or array of strings listing the event names to be forwarded. The second argument is optional, and is the scope on which the events are to be broadcast. If an argument is not provided, it defaults to <code>$rootScope</code>. As a reminder, broadcasted events are propagated down to descendant scopes.</p>
<h4>Examples</h4>
<p>An easy way to make socket error events available across your app:</p>
<div class="fragment"><div class="line">// in the top-level module of the app</div><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;,</div><div class="line">  &#39;myApp.MyCtrl&#39;</div><div class="line">]).</div><div class="line">factory(&#39;mySocket&#39;, function (socketFactory) {</div><div class="line">  var mySocket = socketFactory();</div><div class="line">  mySocket.forward(&#39;error&#39;);</div><div class="line">  return mySocket;</div><div class="line">});</div><div class="line"></div><div class="line">// in one of your controllers</div><div class="line">angular.module(&#39;myApp.MyCtrl&#39;, []).</div><div class="line">  controller(&#39;MyCtrl&#39;, function ($scope) {</div><div class="line">    $scope.$on(&#39;socket:error&#39;, function (ev, data) {</div><div class="line"></div><div class="line">    });</div><div class="line">  });</div></div><!-- fragment --><p>Avoid duplicating event handlers when a user navigates back and forth between routes:</p>
<div class="fragment"><div class="line">angular.module(&#39;myMod&#39;, [&#39;btford.socket-io&#39;]).</div><div class="line">  controller(&#39;MyCtrl&#39;, function ($scope, socket) {</div><div class="line">    socket.forward(&#39;someEvent&#39;, $scope);</div><div class="line">    $scope.$on(&#39;socket:someEvent&#39;, function (ev, data) {</div><div class="line">      $scope.theData = data;</div><div class="line">    });</div><div class="line">  });</div></div><!-- fragment --><h3><code>socketFactory({ ioSocket: }}</code></h3>
<p>This option allows you to provide the <code>socket</code> service with a <code>Socket.IO socket</code> object to be used internally. This is useful if you want to connect on a different path, or need to hold a reference to the <code>Socket.IO socket</code> object for use elsewhere.</p>
<div class="fragment"><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;</div><div class="line">]).</div><div class="line">factory(&#39;mySocket&#39;, function (socketFactory) {</div><div class="line">  var myIoSocket = io.connect(&#39;/some/path&#39;);</div><div class="line"></div><div class="line">  mySocket = socketFactory({</div><div class="line">    ioSocket: myIoSocket</div><div class="line">  });</div><div class="line"></div><div class="line">  return mySocket;</div><div class="line">});</div></div><!-- fragment --><h3><code>socketFactory({ scope: })</code></h3>
<p>This option allows you to set the scope on which <code>$broadcast</code> is forwarded to when using the <code>forward</code> method. It defaults to <code>$rootScope</code>.</p>
<h3><code>socketFactory({ prefix: })</code></h3>
<p>The default prefix is <code>socket:</code>.</p>
<h4>Example</h4>
<p>To remove the prefix:</p>
<div class="fragment"><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;</div><div class="line">]).</div><div class="line">config(function (socketProvider) {</div><div class="line">  socketProvider.prefix(&#39;&#39;);</div><div class="line">});</div></div><!-- fragment --><h2>Migrating from 0.2 to 0.3</h2>
<p><code>angular-socket-io</code> version <code>0.3</code> changes X to make fewer assumptions about the lifecycle of the socket. Previously, the assumption was that your application has a single socket created at config time. While this holds for most apps I've seen, there's no reason you shouldn't be able to lazily create sockets, or have multiple connections.</p>
<p>In <code>0.2</code>, <code>angular-socket-io</code> exposed a <code>socket</code> service. In <code>0.3</code>, it instead exposes a <code>socketFactory</code> service which returns socket instances. Thus, getting the old API is as simple as making your own <code>socket</code> service with <code>socketFactory</code>. The examples below demonstrate how to do this.</p>
<h3>Simple Example</h3>
<p>In most cases, adding the following to your app should suffice:</p>
<div class="fragment"><div class="line">// ...</div><div class="line">factory(&#39;socket&#39;, function (socketFactory) {</div><div class="line">  return socketFactory();</div><div class="line">});</div><div class="line">// ...</div></div><!-- fragment --><h3>Example with Configuration</h3>
<p>Before:</p>
<div class="fragment"><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;</div><div class="line">]).</div><div class="line">config(function (socketProvider) {</div><div class="line">  socketProvider.prefix(&#39;foo~&#39;);</div><div class="line">  socketProvider.ioSocket(io.connect(&#39;/some/path&#39;));</div><div class="line">}).</div><div class="line">controller(&#39;MyCtrl&#39;, function (socket) {</div><div class="line">  socket.on(&#39;foo~bar&#39;, function () {</div><div class="line">    $scope.bar = true;</div><div class="line">  });</div><div class="line">});</div></div><!-- fragment --><p>After:</p>
<div class="fragment"><div class="line">angular.module(&#39;myApp&#39;, [</div><div class="line">  &#39;btford.socket-io&#39;</div><div class="line">]).</div><div class="line">factory(&#39;socket&#39;, function (socketFactory) {</div><div class="line">  return socketFactory({</div><div class="line">    prefix: &#39;foo~&#39;,</div><div class="line">    ioSocket: io.connect(&#39;/some/path&#39;)</div><div class="line">  });</div><div class="line">}).</div><div class="line">controller(&#39;MyCtrl&#39;, function (socket) {</div><div class="line">  socket.on(&#39;foo~bar&#39;, function () {</div><div class="line">    $scope.bar = true;</div><div class="line">  });</div><div class="line">});</div></div><!-- fragment --><h2>FAQ</h2>
<p><a href="https://github.com/btford/angular-socket-io/issues?labels=faq&amp;page=1&amp;state=closed">Closed issues labelled <code>FAQ</code></a> might have the answer to your question.</p>
<h2>See Also</h2>
<ul>
<li><a href="https://github.com/jeffbcross/ngSocket">ngSocket</a></li>
<li><a href="https://github.com/nullivex/angular-socket.io-mock">angular-socket.io-mock</a></li>
</ul>
<h2>License</h2>
<p>MIT </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
