tiny node.\+js debugging utility modelled after node core\textquotesingle{}s debugging technique.

\subsection*{Installation}


\begin{DoxyCode}
$ npm install debug
\end{DoxyCode}


\subsection*{Usage}

With {\ttfamily debug} you simply invoke the exported function to generate your debug function, passing it a name which will determine if a noop function is returned, or a decorated {\ttfamily console.\+error}, so all of the {\ttfamily console} \href{https://developer.chrome.com/devtools/docs/console-api#consolelogobject-object}{\tt format string goodies} you\textquotesingle{}re used to work fine. A unique color is selected per-\/function for visibility.

Example {\itshape app.\+js}\+:


\begin{DoxyCode}
var debug = require('debug')('http')
  , http = require('http')
  , name = 'My App';

// fake app

debug('booting %s', name);

http.createServer(function(req, res)\{
  debug(req.method + ' ' + req.url);
  res.end('hello\(\backslash\)n');
\}).listen(3000, function()\{
  debug('listening');
\});

// fake worker of some kind

require('./worker');
\end{DoxyCode}


Example {\itshape worker.\+js}\+:


\begin{DoxyCode}
var debug = require('debug')('worker');

setInterval(function()\{
  debug('doing some work');
\}, 1000);
\end{DoxyCode}


The {\bfseries D\+E\+B\+UG} environment variable is then used to enable these based on space or comma-\/delimited names. Here are some examples\+:





\paragraph*{Windows note}

On Windows the environment variable is set using the {\ttfamily set} command.


\begin{DoxyCode}
set DEBUG=*,-not\_this
\end{DoxyCode}


Note that Power\+Shell using different syntax to set environment variables.


\begin{DoxyCode}
$env:DEBUG = "*,-not\_this"
\end{DoxyCode}


Then, run the program to be debugged as usual.

\subsection*{Millisecond diff}

When actively developing an application it can be useful to see when the time spent between one {\ttfamily debug()} call and the next. Suppose for example you invoke {\ttfamily debug()} before requesting a resource, and after as well, the \char`\"{}+\+N\+N\+Nms\char`\"{} will show you how much time was spent between calls.



When stdout is not a T\+TY, {\ttfamily Date\+::to\+U\+T\+C\+String()} is used, making it more useful for logging the debug information as shown below\+:



\subsection*{Conventions}

If you\textquotesingle{}re using this in one or more of your libraries, you {\itshape should} use the name of your library so that developers may toggle debugging as desired without guessing names. If you have more than one debuggers you {\itshape should} prefix them with your library name and use \char`\"{}\+:\char`\"{} to separate features. For example \char`\"{}body\+Parser\char`\"{} from Connect would then be \char`\"{}connect\+:body\+Parser\char`\"{}.

\subsection*{Wildcards}

The {\ttfamily $\ast$} character may be used as a wildcard. Suppose for example your library has debuggers named \char`\"{}connect\+:body\+Parser\char`\"{}, \char`\"{}connect\+:compress\char`\"{}, \char`\"{}connect\+:session\char`\"{}, instead of listing all three with {\ttfamily D\+E\+B\+UG=connect\+:body\+Parser,connect\+:compress,connect\+:session}, you may simply do {\ttfamily D\+E\+B\+UG=connect\+:$\ast$}, or to run everything using this module simply use {\ttfamily D\+E\+B\+UG=$\ast$}.

You can also exclude specific debuggers by prefixing them with a \char`\"{}-\/\char`\"{} character. For example, {\ttfamily D\+E\+B\+UG=$\ast$,-\/connect\+:$\ast$} would include all debuggers except those starting with \char`\"{}connect\+:\char`\"{}.

\subsection*{Browser support}

Debug works in the browser as well, currently persisted by {\ttfamily local\+Storage}. Consider the situation shown below where you have {\ttfamily worker\+:a} and {\ttfamily worker\+:b}, and wish to debug both. You can enable this using {\ttfamily local\+Storage.\+debug}\+:


\begin{DoxyCode}
localStorage.debug = 'worker:*'
\end{DoxyCode}


And then refresh the page.


\begin{DoxyCode}
a = debug('worker:a');
b = debug('worker:b');

setInterval(function()\{
  a('doing some work');
\}, 1000);

setInterval(function()\{
  b('doing some work');
\}, 1200);
\end{DoxyCode}


\paragraph*{Web Inspector Colors}

Colors are also enabled on \char`\"{}\+Web Inspectors\char`\"{} that understand the {\ttfamily c} formatting option. These are Web\+Kit web inspectors, Firefox (\href{https://hacks.mozilla.org/2014/05/editable-box-model-multiple-selection-sublime-text-keys-much-more-firefox-developer-tools-episode-31/}{\tt since version 31}) and the Firebug plugin for Firefox (any version).

Colored output looks something like\+:



\subsection*{Output streams}

\subsubsection*{stderr vs stdout}

By default {\ttfamily debug} will log to stderr, however this can be changed by setting the environment variable {\ttfamily D\+E\+B\+U\+G\+\_\+\+FD} to {\ttfamily 1} for stdout and {\ttfamily 2} for stderr (the default value).

You can also set an alternative logging method per-\/namespace by overriding the {\ttfamily log} method on a per-\/namespace or globally\+:

Example {\itshape stdout.\+js}\+:


\begin{DoxyCode}
var debug = require('debug');
var error = debug('app:error');

// by default stderr is used
error('goes to stderr!');

var log = debug('app:log');
// set this namespace to log via console.log
log.log = console.log.bind(console); // don't forget to bind to console!
log('goes to stdout');
error('still goes to stderr!');

// set all output to go via console.info
// overrides all per-namespace log settings
debug.log = console.info.bind(console);
error('now goes to stdout via console.info');
log('still goes to stdout, but via console.info now');
\end{DoxyCode}


\subsubsection*{Save debug output to a file}

You can save all debug statements to a file by piping them.

Example\+:


\begin{DoxyCode}
$ DEBUG\_FD=3 node your-app.js 3> whatever.log
\end{DoxyCode}


\subsubsection*{Terminal colors}

By default colors will only be used in a T\+TY. However this can be overridden by setting the environment variable {\ttfamily D\+E\+B\+U\+G\+\_\+\+C\+O\+L\+O\+RS} to {\ttfamily 1}.

Note\+: Certain I\+D\+Es (such as Web\+Storm) don\textquotesingle{}t support colors on stderr. In these cases you must set {\ttfamily D\+E\+B\+U\+G\+\_\+\+C\+O\+L\+O\+RS} to {\ttfamily 1} and additionally change {\ttfamily D\+E\+B\+U\+G\+\_\+\+FD} to {\ttfamily 1}.

\subsection*{Authors}


\begin{DoxyItemize}
\item TJ Holowaychuk
\item Nathan Rajlich
\item Andrew Rhyne
\end{DoxyItemize}

\subsection*{License}

(The M\+IT License)

Copyright (c) 2014-\/2016 TJ Holowaychuk $<$\href{mailto:tj@vision-media.ca}{\tt tj@vision-\/media.\+ca}$>$

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \textquotesingle{}Software\textquotesingle{}), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\+:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

T\+HE S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED \textquotesingle{}AS IS\textquotesingle{}, W\+I\+T\+H\+O\+UT W\+A\+R\+R\+A\+N\+TY OF A\+NY K\+I\+ND, E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED, I\+N\+C\+L\+U\+D\+I\+NG B\+UT N\+OT L\+I\+M\+I\+T\+ED TO T\+HE W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY, F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+ND N\+O\+N\+I\+N\+F\+R\+I\+N\+G\+E\+M\+E\+NT. IN NO E\+V\+E\+NT S\+H\+A\+LL T\+HE A\+U\+T\+H\+O\+RS OR C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+E\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY C\+L\+A\+IM, D\+A\+M\+A\+G\+ES OR O\+T\+H\+ER L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN AN A\+C\+T\+I\+ON OF C\+O\+N\+T\+R\+A\+CT, T\+O\+RT OR O\+T\+H\+E\+R\+W\+I\+SE, A\+R\+I\+S\+I\+NG F\+R\+OM, O\+UT OF OR IN C\+O\+N\+N\+E\+C\+T\+I\+ON W\+I\+TH T\+HE S\+O\+F\+T\+W\+A\+RE OR T\+HE U\+SE OR O\+T\+H\+ER D\+E\+A\+L\+I\+N\+GS IN T\+HE S\+O\+F\+T\+W\+A\+RE. 