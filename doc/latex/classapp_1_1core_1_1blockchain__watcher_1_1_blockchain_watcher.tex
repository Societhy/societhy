\hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher}{}\section{app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher Class Reference}
\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher}\index{app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher@{app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a49c89ab962a87230ac53f21d1bf7fe42}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a91c1a75611393e857f79ea5125e4e182}{run} (self)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_af61c2c7866ec479d80b5fa6c649fc2ad}{watch} (self)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a35b92106fbfc7887e97e7c7dcb070c7e}{push\+Event} (self, event)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ad4605f13f621b889e271eb1e7a94810b}{new\+Block\+Then} (self, function)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a9de32860b621c9812acca90da840eb2d}{wait\+Block} (self, block\+Number=1)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a512a645e5cd62f93edb45222c8e531be}{wait\+Tx} (self, tx\+\_\+hash)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a0f4b9c5aa78bb78233a6528d80f8ffd4}{wait\+Event} (self, event)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a4a3aaafa9320893f7f530ecbd8c622f6}{pause} (self)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a86bf292f6c15d634ba31825fae29a6e2}{resume} (self)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ace48b275bb55841b3c6a116e6d2fde6a}{stop\+With\+Signal} (self, signal, frame)
\item 
def \hyperlink{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a0b433e2749b4ab3768e43435aeb07bd8}{stop} (self)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_abc452576b09d9885e15f5445ba937046}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_abc452576b09d9885e15f5445ba937046}} 
{\bfseries new\+Block\+Filter}
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ae5657b3593656a97339e3c9c5c771084}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ae5657b3593656a97339e3c9c5c771084}} 
{\bfseries new\+Log\+Event}
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ac10e950f294020cfd162d3b7ca8bbc41}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ac10e950f294020cfd162d3b7ca8bbc41}} 
{\bfseries last\+Event}
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a9cda8323fd95ba1d3e62e983c4287fa5}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a9cda8323fd95ba1d3e62e983c4287fa5}} 
{\bfseries last\+Tx}
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a836ee537363722d2313b5a3d9db854db}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a836ee537363722d2313b5a3d9db854db}} 
{\bfseries event\+Queue} = None
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ab132ee2f7f7927242058689f9e2ff811}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ab132ee2f7f7927242058689f9e2ff811}} 
{\bfseries new\+Block\+Event} = None
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ac6038b26720af1d1662fab47e4353ed0}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ac6038b26720af1d1662fab47e4353ed0}} 
{\bfseries current\+Worker} = None
\item 
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ac17fe9c424735fc43f99f8e1f2a3700f}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ac17fe9c424735fc43f99f8e1f2a3700f}} 
{\bfseries running} = None
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}eventQueue : shared queue where the current events are stored
newBlockFilter : ethereum event that retrieves new block as they are mined
newBlockEvent : eventlet event triggered when a new block is mined
currentWorker : greenthread associated with the routine
running : boolean controlling the status of the watcher\end{DoxyVerb}
 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a49c89ab962a87230ac53f21d1bf7fe42}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a49c89ab962a87230ac53f21d1bf7fe42}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialize each member with its starting values
\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ad4605f13f621b889e271eb1e7a94810b}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ad4605f13f621b889e271eb1e7a94810b}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!new\+Block\+Then@{new\+Block\+Then}}
\index{new\+Block\+Then@{new\+Block\+Then}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{new\+Block\+Then()}{newBlockThen()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+new\+Block\+Then (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{function }\end{DoxyParamCaption})}

\begin{DoxyVerb}function : callback to be called
waits for the next block then triggers the callback 'function'
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a4a3aaafa9320893f7f530ecbd8c622f6}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a4a3aaafa9320893f7f530ecbd8c622f6}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!pause@{pause}}
\index{pause@{pause}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{pause()}{pause()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+pause (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Breaks the routine by setting the status to not running
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a35b92106fbfc7887e97e7c7dcb070c7e}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a35b92106fbfc7887e97e7c7dcb070c7e}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!push\+Event@{push\+Event}}
\index{push\+Event@{push\+Event}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{push\+Event()}{pushEvent()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+push\+Event (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{event }\end{DoxyParamCaption})}

\begin{DoxyVerb}event : models.Event and child classes
push a new event in the queue with filter_id and user_id
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a86bf292f6c15d634ba31825fae29a6e2}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a86bf292f6c15d634ba31825fae29a6e2}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!resume@{resume}}
\index{resume@{resume}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{resume()}{resume()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+resume (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Relaunches the routine
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a91c1a75611393e857f79ea5125e4e182}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a91c1a75611393e857f79ea5125e4e182}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!run@{run}}
\index{run@{run}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+run (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Sets the status to running and launch a new greenthread assigned with the routine 'watch'
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a0b433e2749b4ab3768e43435aeb07bd8}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a0b433e2749b4ab3768e43435aeb07bd8}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!stop@{stop}}
\index{stop@{stop}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+stop (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Stops the routine
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ace48b275bb55841b3c6a116e6d2fde6a}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_ace48b275bb55841b3c6a116e6d2fde6a}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!stop\+With\+Signal@{stop\+With\+Signal}}
\index{stop\+With\+Signal@{stop\+With\+Signal}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{stop\+With\+Signal()}{stopWithSignal()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+stop\+With\+Signal (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{signal,  }\item[{}]{frame }\end{DoxyParamCaption})}

\begin{DoxyVerb}Shut down the thred when catching a signal ctrl+c
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a9de32860b621c9812acca90da840eb2d}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a9de32860b621c9812acca90da840eb2d}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!wait\+Block@{wait\+Block}}
\index{wait\+Block@{wait\+Block}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{wait\+Block()}{waitBlock()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+wait\+Block (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{block\+Number = {\ttfamily 1} }\end{DoxyParamCaption})}

\begin{DoxyVerb}blockNumber : integer / number of block that need to be mined 
waits for a given number of blocks before triggering a newBlockEvent
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a0f4b9c5aa78bb78233a6528d80f8ffd4}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a0f4b9c5aa78bb78233a6528d80f8ffd4}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!wait\+Event@{wait\+Event}}
\index{wait\+Event@{wait\+Event}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{wait\+Event()}{waitEvent()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+wait\+Event (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{event }\end{DoxyParamCaption})}

\begin{DoxyVerb}event : models.Event  / event to be waited for
Waits for a given event
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a512a645e5cd62f93edb45222c8e531be}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_a512a645e5cd62f93edb45222c8e531be}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!wait\+Tx@{wait\+Tx}}
\index{wait\+Tx@{wait\+Tx}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{wait\+Tx()}{waitTx()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+wait\+Tx (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tx\+\_\+hash }\end{DoxyParamCaption})}

\begin{DoxyVerb}tx_hash : string / transaction hash to be waited for
Waits for a given transaction
\end{DoxyVerb}
 \mbox{\Hypertarget{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_af61c2c7866ec479d80b5fa6c649fc2ad}\label{classapp_1_1core_1_1blockchain__watcher_1_1_blockchain_watcher_af61c2c7866ec479d80b5fa6c649fc2ad}} 
\index{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}!watch@{watch}}
\index{watch@{watch}!app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher@{app\+::core\+::blockchain\+\_\+watcher\+::\+Blockchain\+Watcher}}
\subsubsection{\texorpdfstring{watch()}{watch()}}
{\footnotesize\ttfamily def app.\+core.\+blockchain\+\_\+watcher.\+Blockchain\+Watcher.\+watch (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}If the status is set to running, try to retrieve new blocks from the blockchain through the ethjsonrpc API
For each new block, a newBlockEvent is triggered and all the transactions are compared to the ones stored in memory pf the eventQueue. If a match occures, a NewLogEvent is triggered and the callback previously registered inside the event is called.
The callbacks are used to update the models accordingly to the new data retrieved from the transactions in the new blocks.
Finally an other routine is scheduled for the next second.
\end{DoxyVerb}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
app/core/blockchain\+\_\+watcher.\+py\end{DoxyCompactItemize}
