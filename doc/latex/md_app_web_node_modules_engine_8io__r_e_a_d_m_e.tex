\href{http://travis-ci.org/socketio/engine.io}{\tt } \href{http://badge.fury.io/js/engine.io}{\tt }

{\ttfamily Engine.\+IO} is the implementation of transport-\/based cross-\/browser/cross-\/device bi-\/directional communication layer for \href{http://github.com/socketio/socket.io}{\tt Socket.\+IO}.

\subsection*{How to use}

\subsubsection*{Server}

\paragraph*{(A) Listening on a port}


\begin{DoxyCode}
var engine = require('engine.io');
var server = engine.listen(80);

server.on('connection', function(socket)\{
  socket.send('utf 8 string');
  socket.send(new Buffer([0, 1, 2, 3, 4, 5])); // binary data
\});
\end{DoxyCode}


\paragraph*{(B) Intercepting requests for a http.\+Server}


\begin{DoxyCode}
var engine = require('engine.io');
var http = require('http').createServer().listen(3000);
var server = engine.attach(http);

server.on('connection', function (socket) \{
  socket.on('message', function(data)\{ \});
  socket.on('close', function()\{ \});
\});
\end{DoxyCode}


\paragraph*{(C) Passing in requests}


\begin{DoxyCode}
var engine = require('engine.io');
var server = new engine.Server();

server.on('connection', function(socket)\{
  socket.send('hi');
\});

// …
httpServer.on('upgrade', function(req, socket, head)\{
  server.handleUpgrade(req, socket, head);
\});
httpServer.on('request', function(req, res)\{
  server.handleRequest(req, res);
\});
\end{DoxyCode}


\subsubsection*{Client}


\begin{DoxyCode}
<script src="/path/to/engine.io.js"></script>
<script>
  var socket = new eio.Socket('ws://localhost/');
  socket.on('open', function()\{
    socket.on('message', function(data)\{\});
    socket.on('close', function()\{\});
  \});
</script>
\end{DoxyCode}


For more information on the client refer to the \href{http://github.com/learnboost/engine.io-client}{\tt engine-\/client} repository.

\subsection*{What features does it have?}


\begin{DoxyItemize}
\item {\bfseries Maximum reliability}. Connections are established even in the presence of\+:
\begin{DoxyItemize}
\item proxies and load balancers.
\item personal firewall and antivirus software.
\item for more information refer to {\bfseries Goals} and {\bfseries Architecture} sections
\end{DoxyItemize}
\item {\bfseries Minimal client size} aided by\+:
\begin{DoxyItemize}
\item lazy loading of flash transports.
\item lack of redundant transports.
\end{DoxyItemize}
\item {\bfseries Scalable}
\begin{DoxyItemize}
\item load balancer friendly
\end{DoxyItemize}
\item {\bfseries Future proof}
\item {\bfseries 100\% Node.\+JS core style}
\begin{DoxyItemize}
\item No A\+PI sugar (left for higher level projects)
\item Written in readable vanilla Java\+Script
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{A\+PI}

\subsubsection*{Server}



~\newline


\paragraph*{Top-\/level}

These are exposed by `require(\textquotesingle{}engine.\+io\textquotesingle{})`\+:

\subparagraph*{Events}


\begin{DoxyItemize}
\item {\ttfamily flush}
\begin{DoxyItemize}
\item Called when a socket buffer is being flushed.
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily Socket}\+: socket being flushed
\item {\ttfamily Array}\+: write buffer
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily drain}
\begin{DoxyItemize}
\item Called when a socket buffer is drained
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily Socket}\+: socket being flushed
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\subparagraph*{Properties}


\begin{DoxyItemize}
\item {\ttfamily protocol} \+\_\+(\+Number)\+\_\+\+: protocol revision number
\item {\ttfamily Server}\+: Server class constructor
\item {\ttfamily Socket}\+: Socket class constructor
\item {\ttfamily Transport} \+\_\+(\+Function)\+\_\+\+: transport constructor
\item {\ttfamily transports} \+\_\+(\+Object)\+\_\+\+: map of available transports
\end{DoxyItemize}

\subparagraph*{Methods}


\begin{DoxyItemize}
\item {\ttfamily ()}
\begin{DoxyItemize}
\item Returns a new {\ttfamily Server} instance. If the first argument is an {\ttfamily http.\+Server} then the new {\ttfamily Server} instance will be attached to it. Otherwise, the arguments are passed directly to the {\ttfamily Server} constructor.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily http.\+Server}\+: optional, server to attach to.
\item {\ttfamily Object}\+: optional, options object (see {\ttfamily Server\+::constructor} api docs below)
\end{DoxyItemize}
\end{DoxyItemize}

The following are identical ways to instantiate a server and then attach it. ``{\ttfamily js var http\+Server; // previously created with}http.\+create\+Server();` from node.\+js api.

// create a server first, and then attach var eio\+Server = require(\textquotesingle{}engine.\+io\textquotesingle{}).Server(); eio\+Server.\+attach(http\+Server);

// or call the module as a function to get {\ttfamily Server} var eio\+Server = require(\textquotesingle{}engine.\+io\textquotesingle{})(); eio\+Server.\+attach(http\+Server);

// immediately attach var eio\+Server = require(\textquotesingle{}engine.\+io\textquotesingle{})(http\+Server); ```
\item {\ttfamily listen}
\begin{DoxyItemize}
\item Creates an {\ttfamily http.\+Server} which listens on the given port and attaches WS to it. It returns {\ttfamily 501 Not Implemented} for regular http requests.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily Number}\+: port to listen on.
\item {\ttfamily Object}\+: optional, options object
\item {\ttfamily Function}\+: callback for {\ttfamily listen}.
\end{DoxyItemize}
\item {\bfseries Options}
\begin{DoxyItemize}
\item All options from {\ttfamily Server.\+attach} method, documented below.
\item {\bfseries Additionally} See Server {\ttfamily constructor} below for options you can pass for creating the new Server
\end{DoxyItemize}
\item {\bfseries Returns} {\ttfamily Server}
\end{DoxyItemize}
\item {\ttfamily attach}
\begin{DoxyItemize}
\item Captures {\ttfamily upgrade} requests for a {\ttfamily http.\+Server}. In other words, makes a regular http.\+Server Web\+Socket-\/compatible.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily http.\+Server}\+: server to attach to.
\item {\ttfamily Object}\+: optional, options object
\end{DoxyItemize}
\item {\bfseries Options}
\begin{DoxyItemize}
\item All options from {\ttfamily Server.\+attach} method, documented below.
\item {\bfseries Additionally} See Server {\ttfamily constructor} below for options you can pass for creating the new Server
\end{DoxyItemize}
\item {\bfseries Returns} {\ttfamily Server} a new Server instance.
\end{DoxyItemize}
\end{DoxyItemize}



~\newline


\paragraph*{Server}

The main server/manager. {\itshape Inherits from Event\+Emitter}.

\subparagraph*{Events}


\begin{DoxyItemize}
\item {\ttfamily connection}
\begin{DoxyItemize}
\item Fired when a new connection is established.
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily Socket}\+: a Socket object
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\subparagraph*{Properties}

{\bfseries Important}\+: if you plan to use Engine.\+IO in a scalable way, please keep in mind the properties below will only reflect the clients connected to a single process.


\begin{DoxyItemize}
\item {\ttfamily clients} \+\_\+(\+Object)\+\_\+\+: hash of connected clients by id.
\item {\ttfamily clients\+Count} \+\_\+(\+Number)\+\_\+\+: number of connected clients.
\end{DoxyItemize}

\subparagraph*{Methods}


\begin{DoxyItemize}
\item {\bfseries constructor}
\begin{DoxyItemize}
\item Initializes the server
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily Object}\+: optional, options object
\end{DoxyItemize}
\item {\bfseries Options}
\begin{DoxyItemize}
\item {\ttfamily ping\+Timeout} ({\ttfamily Number})\+: how many ms without a pong packet to consider the connection closed ({\ttfamily 60000})
\item {\ttfamily ping\+Interval} ({\ttfamily Number})\+: how many ms before sending a new ping packet ({\ttfamily 25000})
\item {\ttfamily upgrade\+Timeout} ({\ttfamily Number})\+: how many ms before an uncompleted transport upgrade is cancelled ({\ttfamily 10000})
\item {\ttfamily max\+Http\+Buffer\+Size} ({\ttfamily Number})\+: how many bytes or characters a message can be when polling, before closing the session (to avoid DoS). Default value is {\ttfamily 10\+E7}.
\item {\ttfamily allow\+Request} ({\ttfamily Function})\+: A function that receives a given handshake or upgrade request as its first parameter, and can decide whether to continue or not. The second argument is a function that needs to be called with the decided information\+: {\ttfamily fn(err, success)}, where {\ttfamily success} is a boolean value where false means that the request is rejected, and err is an error code.
\item {\ttfamily transports} ({\ttfamily $<$Array$>$ String})\+: transports to allow connections to (`\mbox{[}\textquotesingle{}polling\textquotesingle{}, \textquotesingle{}websocket\textquotesingle{}\mbox{]}{\ttfamily ) -\/}allow\+Upgrades{\ttfamily (}Boolean{\ttfamily )\+: whether to allow transport upgrades (}true{\ttfamily ) -\/}per\+Message\+Deflate{\ttfamily (}Object$\vert$\+Boolean{\ttfamily )\+: parameters of the Web\+Socket permessage-\/deflate extension (see \mbox{[}ws module\mbox{]}(\href{https://github.com/einaros/ws}{\tt https\+://github.\+com/einaros/ws}) api docs). Set to}false{\ttfamily to disable. (}true{\ttfamily ) -\/}threshold{\ttfamily (}Number{\ttfamily )\+: data is compressed only if the byte size is above this value (}1024{\ttfamily ) -\/}http\+Compression{\ttfamily (}Object$\vert$\+Boolean{\ttfamily )\+: parameters of the http compression for the polling transports (see \mbox{[}zlib\mbox{]}(\href{http://nodejs.org/api/zlib.html#zlib_options}{\tt http\+://nodejs.\+org/api/zlib.\+html\#zlib\+\_\+options}) api docs). Set to}false{\ttfamily to disable. (}true{\ttfamily ) -\/}threshold{\ttfamily (}Number{\ttfamily )\+: data is compressed only if the byte size is above this value (}1024{\ttfamily ) -\/}cookie{\ttfamily (}String$\vert$\+Boolean`)\+: name of the H\+T\+TP cookie that contains the client sid to send as part of handshake response headers. Set to {\ttfamily false} to not send one. ({\ttfamily io})
\item {\ttfamily cookie\+Path} ({\ttfamily String$\vert$\+Boolean})\+: path of the above {\ttfamily cookie} option. If false, no path will be sent, which means browsers will only send the cookie on the engine.\+io attached path ({\ttfamily /engine.io}). Set false to not save io cookie on all requests. ({\ttfamily /})
\item {\ttfamily cookie\+Http\+Only} ({\ttfamily Boolean})\+: If {\ttfamily true} Http\+Only io cookie cannot be accessed by client-\/side A\+P\+Is, such as Java\+Script. ({\ttfamily true}) {\itshape This option has no effect if {\ttfamily cookie} or {\ttfamily cookie\+Path} is set to {\ttfamily false}.}
\item {\ttfamily ws\+Engine} ({\ttfamily String})\+: what Web\+Socket server implementation to use. Specified module must conform to the {\ttfamily ws} interface (see https\+://github.com/websockets/ws/blob/master/doc/ws.\+md \char`\"{}ws module api docs\char`\"{}). Default value is {\ttfamily ws}. An alternative c++ addon is also available by installing {\ttfamily uws} module.
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily close}
\begin{DoxyItemize}
\item Closes all clients
\item {\bfseries Returns} {\ttfamily Server} for chaining
\end{DoxyItemize}
\item {\ttfamily handle\+Request}
\begin{DoxyItemize}
\item Called internally when a {\ttfamily Engine} request is intercepted.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily http.\+Incoming\+Message}\+: a node request object
\item {\ttfamily http.\+Server\+Response}\+: a node response object
\end{DoxyItemize}
\item {\bfseries Returns} {\ttfamily Server} for chaining
\end{DoxyItemize}
\item {\ttfamily handle\+Upgrade}
\begin{DoxyItemize}
\item Called internally when a {\ttfamily Engine} ws upgrade is intercepted.
\item {\bfseries Parameters} (same as {\ttfamily upgrade} event)
\begin{DoxyItemize}
\item {\ttfamily http.\+Incoming\+Message}\+: a node request object
\item {\ttfamily net.\+Stream}\+: T\+CP socket for the request
\item {\ttfamily Buffer}\+: legacy tail bytes
\end{DoxyItemize}
\item {\bfseries Returns} {\ttfamily Server} for chaining
\end{DoxyItemize}
\item {\ttfamily attach}
\begin{DoxyItemize}
\item Attach this Server instance to an {\ttfamily http.\+Server}
\item Captures {\ttfamily upgrade} requests for a {\ttfamily http.\+Server}. In other words, makes a regular http.\+Server Web\+Socket-\/compatible.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily http.\+Server}\+: server to attach to.
\item {\ttfamily Object}\+: optional, options object
\end{DoxyItemize}
\item {\bfseries Options}
\begin{DoxyItemize}
\item {\ttfamily path} ({\ttfamily String})\+: name of the path to capture ({\ttfamily /engine.io}).
\item {\ttfamily destroy\+Upgrade} ({\ttfamily Boolean})\+: destroy unhandled upgrade requests ({\ttfamily true})
\item {\ttfamily destroy\+Upgrade\+Timeout} ({\ttfamily Number})\+: milliseconds after which unhandled requests are ended ({\ttfamily 1000})
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily generate\+Id}
\begin{DoxyItemize}
\item Generate a socket id.
\item Overwrite this method to generate your custom socket id.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily http.\+Incoming\+Message}\+: a node request object
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

{\bfseries Returns} A socket id for connected client.



~\newline


\paragraph*{Socket}

A representation of a client. {\itshape Inherits from Event\+Emitter}.

\subparagraph*{Events}


\begin{DoxyItemize}
\item {\ttfamily close}
\begin{DoxyItemize}
\item Fired when the client is disconnected.
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily String}\+: reason for closing
\item {\ttfamily Object}\+: description object (optional)
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily message}
\begin{DoxyItemize}
\item Fired when the client sends a message.
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily String} or {\ttfamily Buffer}\+: Unicode string or Buffer with binary contents
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily error}
\begin{DoxyItemize}
\item Fired when an error occurs.
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily Error}\+: error object
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily flush}
\begin{DoxyItemize}
\item Called when the write buffer is being flushed.
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily Array}\+: write buffer
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily drain}
\begin{DoxyItemize}
\item Called when the write buffer is drained
\end{DoxyItemize}
\item {\ttfamily packet}
\begin{DoxyItemize}
\item Called when a socket received a packet ({\ttfamily message}, {\ttfamily ping})
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily type}\+: packet type
\item {\ttfamily data}\+: packet data (if type is message)
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily packet\+Create}
\begin{DoxyItemize}
\item Called before a socket sends a packet ({\ttfamily message}, {\ttfamily pong})
\item {\bfseries Arguments}
\begin{DoxyItemize}
\item {\ttfamily type}\+: packet type
\item {\ttfamily data}\+: packet data (if type is message)
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\subparagraph*{Properties}


\begin{DoxyItemize}
\item {\ttfamily id} \+\_\+(\+String)\+\_\+\+: unique identifier
\item {\ttfamily server} \+\_\+(\+Server)\+\_\+\+: engine parent reference
\item {\ttfamily request} \+\_\+(http.\+Incoming\+Message)\+\_\+\+: request that originated the Socket
\item {\ttfamily upgraded} \+\_\+(\+Boolean)\+\_\+\+: whether the transport has been upgraded
\item {\ttfamily ready\+State} \+\_\+(\+String)\+\_\+\+: opening$\vert$open$\vert$closing$\vert$closed
\item {\ttfamily transport} \+\_\+(\+Transport)\+\_\+\+: transport reference
\end{DoxyItemize}

\subparagraph*{Methods}


\begin{DoxyItemize}
\item {\ttfamily send}\+:
\begin{DoxyItemize}
\item Sends a message, performing {\ttfamily message = to\+String(arguments\mbox{[}0\mbox{]})} unless sending binary data, which is sent as is.
\item {\bfseries Parameters}
\begin{DoxyItemize}
\item {\ttfamily String} $\vert$ {\ttfamily Buffer} $\vert$ {\ttfamily Array\+Buffer} $\vert$ {\ttfamily Array\+Buffer\+View}\+: a string or any object implementing {\ttfamily to\+String()}, with outgoing data, or a Buffer or Array\+Buffer with binary data. Also any Array\+Buffer\+View can be sent as is.
\item {\ttfamily Object}\+: optional, options object
\item {\ttfamily Function}\+: optional, a callback executed when the message gets flushed out by the transport
\end{DoxyItemize}
\item {\bfseries Options}
\begin{DoxyItemize}
\item {\ttfamily compress} ({\ttfamily Boolean})\+: whether to compress sending data. This option might be ignored and forced to be {\ttfamily true} when using polling. ({\ttfamily true})
\end{DoxyItemize}
\item {\bfseries Returns} {\ttfamily Socket} for chaining
\end{DoxyItemize}
\item {\ttfamily close}
\begin{DoxyItemize}
\item Disconnects the client
\item {\bfseries Returns} {\ttfamily Socket} for chaining
\end{DoxyItemize}
\end{DoxyItemize}

\subsubsection*{Client}



~\newline


Exposed in the {\ttfamily eio} global namespace (in the browser), or by `require(\textquotesingle{}engine.\+io-\/client\textquotesingle{})` (in Node.\+JS).

For the client A\+PI refer to the \href{http://github.com/learnboost/engine.io-client}{\tt engine-\/client} repository.

\subsection*{Debug / logging}

Engine.\+IO is powered by \href{http://github.com/visionmedia/debug}{\tt debug}. In order to see all the debug output, run your app with the environment variable {\ttfamily D\+E\+B\+UG} including the desired scope.

To see the output from all of Engine.\+IO\textquotesingle{}s debugging scopes you can use\+:


\begin{DoxyCode}
DEBUG=engine* node myapp
\end{DoxyCode}


\subsection*{Transports}


\begin{DoxyItemize}
\item {\ttfamily polling}\+: X\+HR / J\+S\+O\+NP polling transport.
\item {\ttfamily websocket}\+: Web\+Socket transport.
\end{DoxyItemize}

\subsection*{Plugins}


\begin{DoxyItemize}
\item \href{https://github.com/EugenDueck/engine.io-conflation}{\tt engine.\+io-\/conflation}\+: Makes {\bfseries conflation and aggregation} of messages straightforward.
\end{DoxyItemize}

\subsection*{Support}

The support channels for {\ttfamily engine.\+io} are the same as {\ttfamily socket.\+io}\+:
\begin{DoxyItemize}
\item irc.\+freenode.\+net $\ast$$\ast$\#socket.\+io$\ast$$\ast$
\item \href{http://groups.google.com/group/socket_io}{\tt Google Groups}
\item \href{http://socket.io}{\tt Website}
\end{DoxyItemize}

\subsection*{Development}

To contribute patches, run tests or benchmarks, make sure to clone the repository\+:


\begin{DoxyCode}
git clone git://github.com/LearnBoost/engine.io.git
\end{DoxyCode}


Then\+:


\begin{DoxyCode}
cd engine.io
npm install
\end{DoxyCode}


\subsection*{Tests}

Tests run with {\ttfamily make test}. It runs the server tests that are aided by the usage of {\ttfamily engine.\+io-\/client}.

Make sure {\ttfamily npm install} is run first.

\subsection*{Goals}

The main goal of {\ttfamily Engine} is ensuring the most reliable realtime communication. Unlike the previous Socket.\+IO core, it always establishes a long-\/polling connection first, then tries to upgrade to better transports that are \char`\"{}tested\char`\"{} on the side.

During the lifetime of the Socket.\+IO projects, we\textquotesingle{}ve found countless drawbacks to relying on {\ttfamily H\+T\+M\+L5 Web\+Socket} or {\ttfamily Flash Socket} as the first connection mechanisms.

Both are clearly the {\itshape right way} of establishing a bidirectional communication, with H\+T\+M\+L5 Web\+Socket being the way of the future. However, to answer most business needs, alternative traditional H\+T\+TP 1.\+1 mechanisms are just as good as delivering the same solution.

Web\+Socket based connections have two fundamental benefits\+:


\begin{DoxyEnumerate}
\item {\bfseries Better server performance}
\begin{DoxyItemize}
\item {\itshape A\+: Load balancers}~\newline
 Load balancing a long polling connection poses a serious architectural nightmare since requests can come from any number of open sockets by the user agent, but they all need to be routed to the process and computer that owns the {\ttfamily Engine} connection. This negatively impacts R\+AM and C\+PU usage.
\item {\itshape B\+: Network traffic}~\newline
 Web\+Socket is designed around the premise that each message frame has to be surrounded by the least amount of data. In H\+T\+TP 1.\+1 transports, each message frame is surrounded by H\+T\+TP headers and chunked encoding frames. If you try to send the message \+\_\+\char`\"{}\+Hello world\char`\"{}\+\_\+ with xhr-\/polling, the message ultimately becomes larger than if you were to send it with Web\+Socket.
\item {\itshape C\+: Lightweight parser}~\newline
 As an effect of {\bfseries B}, the server has to do a lot more work to parse the network data and figure out the message when traditional H\+T\+TP requests are used (as in long polling). This means that another advantage of Web\+Socket is less server C\+PU usage.
\end{DoxyItemize}
\item {\bfseries Better user experience}

Due to the reasons stated in point {\bfseries 1}, the most important effect of being able to establish a Web\+Socket connection is raw data transfer speed, which translates in {\itshape some} cases in better user experience.

Applications with heavy realtime interaction (such as games) will benefit greatly, whereas applications like realtime chat (Gmail/\+Facebook), newsfeeds (Facebook) or timelines (Twitter) will have negligible user experience improvements.
\end{DoxyEnumerate}

Having said this, attempting to establish a Web\+Socket connection directly so far has proven problematic\+:


\begin{DoxyEnumerate}
\item {\bfseries Proxies}~\newline
 Many corporate proxies block Web\+Socket traffic.
\item {\bfseries Personal firewall and antivirus software}~\newline
 As a result of our research, we\textquotesingle{}ve found that at least 3 personal security applications block Web\+Socket traffic.
\item {\bfseries Cloud application platforms}~\newline
 Platforms like Heroku or No.\+de have had trouble keeping up with the fast-\/paced nature of the evolution of the Web\+Socket protocol. Applications therefore end up inevitably using long polling, but the seamless installation experience of Socket.\+IO we strive for (\+\_\+\char`\"{}require() it and it just works\char`\"{}\+\_\+) disappears.
\end{DoxyEnumerate}

Some of these problems have solutions. In the case of proxies and personal programs, however, the solutions many times involve upgrading software. Experience has shown that relying on client software upgrades to deliver a business solution is fruitless\+: the very existence of this project has to do with a fragmented panorama of user agent distribution, with clients connecting with latest versions of the most modern user agents (Chrome, Firefox and Safari), but others with versions as low as IE 5.\+5.

From the user perspective, an unsuccessful Web\+Socket connection can translate in up to at least 10 seconds of waiting for the realtime application to begin exchanging data. This {\bfseries perceptively} hurts user experience.

To summarize, {\bfseries Engine} focuses on reliability and user experience first, marginal potential UX improvements and increased server performance second. {\ttfamily Engine} is the result of all the lessons learned with Web\+Socket in the wild.

\subsection*{Architecture}

The main premise of {\ttfamily Engine}, and the core of its existence, is the ability to swap transports on the fly. A connection starts as xhr-\/polling, but it can switch to Web\+Socket.

The central problem this poses is\+: how do we switch transports without losing messages?

{\ttfamily Engine} only switches from polling to another transport in between polling cycles. Since the server closes the connection after a certain timeout when there\textquotesingle{}s no activity, and the polling transport implementation buffers messages in between connections, this ensures no message loss and optimal performance.

Another benefit of this design is that we workaround almost all the limitations of {\bfseries Flash Socket}, such as slow connection times, increased file size (we can safely lazy load it without hurting user experience), etc.

\subsection*{F\+AQ}

\subsubsection*{Can I use engine without Socket.\+IO ?}

Absolutely. Although the recommended framework for building realtime applications is Socket.\+IO, since it provides fundamental features for real-\/world applications such as multiplexing, reconnection support, etc.

{\ttfamily Engine} is to Socket.\+IO what Connect is to Express. An essential piece for building realtime frameworks, but something you {\itshape probably} won\textquotesingle{}t be using for building actual applications.

\subsubsection*{Does the server serve the client?}

No. The main reason is that {\ttfamily Engine} is meant to be bundled with frameworks. Socket.\+IO includes {\ttfamily Engine}, therefore serving two clients is not necessary. If you use Socket.\+IO, including


\begin{DoxyCode}
<script src="/socket.io/socket.io.js">
\end{DoxyCode}


has you covered.

\subsubsection*{Can I implement {\ttfamily Engine} in other languages?}

Absolutely. The \href{https://github.com/LearnBoost/engine.io-protocol}{\tt engine.\+io-\/protocol} repository contains the most up to date description of the specification at all times, and the parser implementation in Java\+Script.

\subsection*{License}

(The M\+IT License)

Copyright (c) 2014 Guillermo Rauch $<$\href{mailto:guillermo@learnboost.com}{\tt guillermo@learnboost.\+com}$>$

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \textquotesingle{}Software\textquotesingle{}), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\+:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

T\+HE S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED \textquotesingle{}AS IS\textquotesingle{}, W\+I\+T\+H\+O\+UT W\+A\+R\+R\+A\+N\+TY OF A\+NY K\+I\+ND, E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED, I\+N\+C\+L\+U\+D\+I\+NG B\+UT N\+OT L\+I\+M\+I\+T\+ED TO T\+HE W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY, F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+ND N\+O\+N\+I\+N\+F\+R\+I\+N\+G\+E\+M\+E\+NT. IN NO E\+V\+E\+NT S\+H\+A\+LL T\+HE A\+U\+T\+H\+O\+RS OR C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+E\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY C\+L\+A\+IM, D\+A\+M\+A\+G\+ES OR O\+T\+H\+ER L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN AN A\+C\+T\+I\+ON OF C\+O\+N\+T\+R\+A\+CT, T\+O\+RT OR O\+T\+H\+E\+R\+W\+I\+SE, A\+R\+I\+S\+I\+NG F\+R\+OM, O\+UT OF OR IN C\+O\+N\+N\+E\+C\+T\+I\+ON W\+I\+TH T\+HE S\+O\+F\+T\+W\+A\+RE OR T\+HE U\+SE OR O\+T\+H\+ER D\+E\+A\+L\+I\+N\+GS IN T\+HE S\+O\+F\+T\+W\+A\+RE. 