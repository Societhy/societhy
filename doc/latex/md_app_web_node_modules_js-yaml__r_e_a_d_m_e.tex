\href{http://travis-ci.org/nodeca/js-yaml}{\tt }

\href{http://nodeca.github.com/js-yaml/}{\tt Online Demo}

This is an implementation of \href{http://yaml.org/}{\tt Y\+A\+ML}, a human friendly data serialization language. Started as \href{http://pyyaml.org/}{\tt Py\+Y\+A\+ML} port, it was completely rewritten from scratch. Now it\textquotesingle{}s very fast, and supports 1.\+2 spec.

\subsection*{Breaking changes in 1.\+x.\+x -\/$>$ 2.\+0.\+x }

If your have not used {\bfseries custom} tags or loader classes -\/ no changes needed. Just upgrade library and enjoy high parse speed.

In other case, you should rewrite your tag constructors and custom loader classes, to conform new schema-\/based A\+PI. See \href{https://github.com/nodeca/js-yaml/tree/master/examples}{\tt examples} and \href{https://github.com/nodeca/js-yaml/wiki}{\tt wiki} for details. Note, that parser internals were completely rewritten.

\subsection*{Installation }

\subsubsection*{Y\+A\+ML module for node.\+js}


\begin{DoxyCode}
npm install js-yaml
\end{DoxyCode}


\subsubsection*{C\+LI executable}

If you want to inspect your Y\+A\+ML files from C\+LI, install js-\/yaml globally\+:


\begin{DoxyCode}
npm install js-yaml -g
\end{DoxyCode}


\paragraph*{Usage}


\begin{DoxyCode}
usage: js-yaml [-h] [-v] [-c] [-j] [-t] file

Positional arguments:
  file           File with YAML document(s)

Optional arguments:
  -h, --help     Show this help message and exit.
  -v, --version  Show program's version number and exit.
  -c, --compact  Display errors in compact mode
  -j, --to-json  Output a non-funky boring JSON
  -t, --trace    Show stack trace on error
\end{DoxyCode}


\subsubsection*{Bundled Y\+A\+ML library for browsers}


\begin{DoxyCode}
<script src="js-yaml.min.js"></script>
<script type="text/javascript">
var doc = jsyaml.load('greeting: hello\(\backslash\)nname: world');
</script>
\end{DoxyCode}


Browser support was done mostly for online demo. If you find any errors -\/ feel free to send pull requests with fixes. Also note, that IE and other old browsers needs \href{https://github.com/kriskowal/es5-shim}{\tt es5-\/shims} to operate.

\subsection*{A\+PI }

Here we cover the most \textquotesingle{}useful\textquotesingle{} methods. If you need advanced details (creating your own tags), see \href{https://github.com/nodeca/js-yaml/wiki}{\tt wiki} and \href{https://github.com/nodeca/js-yaml/tree/master/examples}{\tt examples} for more info.

In node.\+js J\+S-\/\+Y\+A\+ML automatically registers handlers for {\ttfamily .yml} and {\ttfamily .yaml} files. You can load them just with {\ttfamily require}. That\textquotesingle{}s mostly equivalent to calling {\ttfamily load()} on fetched content of a file. Just with one string!


\begin{DoxyCode}
require('js-yaml');

// Get document, or throw exception on error
try \{
  var doc = require('/home/ixti/example.yml');
  console.log(doc);
\} catch (e) \{
  console.log(e);
\}
\end{DoxyCode}


\subsubsection*{load (string \mbox{[} , options \mbox{]})}

Parses {\ttfamily string} as single Y\+A\+ML document. Returns a Java\+Script object or throws {\ttfamily Y\+A\+M\+L\+Exception} on error.

N\+O\+TE\+: This function {\bfseries does not} understands multi-\/document sources, it throws exception on those.

options\+:


\begin{DoxyItemize}
\item {\ttfamily filename} \+\_\+(default\+: null)\+\_\+ -\/ string to be used as a file path in error/warning messages.
\item {\ttfamily strict} \+\_\+(default -\/ false)\+\_\+ makes the loader to throw errors instead of warnings.
\item {\ttfamily schema} \+\_\+(default\+: {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+C\+H\+E\+MA})\+\_\+ -\/ specifies a schema to use.
\end{DoxyItemize}

\subsubsection*{load\+All (string, iterator \mbox{[} , options \mbox{]})}

Same as {\ttfamily load()}, but understands multi-\/document sources and apply {\ttfamily iterator} to each document.


\begin{DoxyCode}
var yaml = require('js-yaml');

yaml.loadAll(data, function (doc) \{
  console.log(doc);
\});
\end{DoxyCode}


\subsubsection*{safe\+Load (string \mbox{[} , options \mbox{]})}

Same as {\ttfamily load()} but uses {\ttfamily S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+MA} by default -\/ only recommended tags of Y\+A\+ML specification (no Java\+Script-\/specific tags, e.\+g. {\ttfamily !!js/regexp}).

\subsubsection*{safe\+Load\+All (string, iterator \mbox{[} , options \mbox{]})}

Same as {\ttfamily load\+All()} but uses {\ttfamily S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+MA} by default -\/ only recommended tags of Y\+A\+ML specification (no Java\+Script-\/specific tags, e.\+g. {\ttfamily !!js/regexp}).

\subsubsection*{dump (object \mbox{[} , options \mbox{]})}

Serializes {\ttfamily object} as Y\+A\+ML document.

options\+:


\begin{DoxyItemize}
\item {\ttfamily indent} \+\_\+(default\+: 2)\+\_\+ -\/ indentation width to use (in spaces).
\item {\ttfamily flow\+Level} (default\+: -\/1) -\/ specifies level of nesting, when to switch from block to flow style for collections. -\/1 means block style everwhere
\item {\ttfamily styles} -\/ \char`\"{}tag\char`\"{} =$>$ \char`\"{}style\char`\"{} map. Each tag may have own set of styles.
\item {\ttfamily schema} \+\_\+(default\+: {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+C\+H\+E\+MA})\+\_\+ specifies a schema to use.
\end{DoxyItemize}

styles\+:


\begin{DoxyCode}
!!null
  "canonical"   => "~"

!!int
  "binary"      => "0b1", "0b101010", "0b1110001111010"
  "octal"       => "01", "052", "016172"
  "decimal"     => "1", "42", "7290"
  "hexadecimal" => "0x1", "0x2A", "0x1C7A"

!!null, !!bool, !!float
  "lowercase"   => "null", "true", "false", ".nan", '.inf'
  "uppercase"   => "NULL", "TRUE", "FALSE", ".NAN", '.INF'
  "camelcase"   => "Null", "True", "False", ".NaN", '.Inf'
\end{DoxyCode}


By default, !!int uses {\ttfamily decimal}, and !!null, !!bool, !!float use {\ttfamily lowercase}.

\subsubsection*{safe\+Dump (object \mbox{[} , options \mbox{]})}

Same as {\ttfamily dump()} but uses {\ttfamily S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+MA} by default -\/ only recommended tags of Y\+A\+ML specification (no Java\+Script-\/specific tags, e.\+g. {\ttfamily !!js/regexp}).

\subsection*{Supported Y\+A\+ML types }

The list of standard Y\+A\+ML tags and corresponding Java\+Scipt types. See also \href{http://pyyaml.org/wiki/YAMLTagDiscussion}{\tt Y\+A\+ML tag discussion} and \href{http://yaml.org/type/}{\tt Y\+A\+ML types repository}.


\begin{DoxyCode}
!!null ''                   # null
!!bool 'yes'                # bool
!!int '3...'                # number
!!float '3.14...'           # number
!!binary '...base64...'     # buffer
!!timestamp 'YYYY-...'      # date
!!omap [ ... ]              # array of key-value pairs
!!pairs [ ... ]             # array or array pairs
!!set \{ ... \}               # array of objects with given keys and null values
!!str '...'                 # string
!!seq [ ... ]               # array
!!map \{ ... \}               # object
\end{DoxyCode}


{\bfseries Java\+Script-\/specific tags}


\begin{DoxyCode}
!!js/regexp /pattern/gim            # RegExp
!!js/undefined ''                   # Undefined
!!js/function 'function () \{...\}'   # Function
\end{DoxyCode}


\subsection*{Caveats}

Note, that you use arrays or objects as key in J\+S-\/\+Y\+A\+ML. JS do not allows objects or array as keys, and stringifies (by calling .to\+String method) them at the moment of adding them.


\begin{DoxyCode}
---
? [ foo, bar ]
: - baz
? \{ foo: bar \}
: - baz
  - baz
\end{DoxyCode}



\begin{DoxyCode}
\{ "foo,bar": ["baz"], "[object Object]": ["baz", "baz"] \}
\end{DoxyCode}


Also, reading of properties on implicit block mapping keys is not supported yet. So, the following Y\+A\+ML document cannot be loaded.


\begin{DoxyCode}
&anchor foo:
  foo: bar
  *anchor: duplicate key
  baz: bat
  *anchor: duplicate key
\end{DoxyCode}


\subsection*{License}

View the \href{https://github.com/nodeca/js-yaml/blob/master/LICENSE}{\tt L\+I\+C\+E\+N\+SE} file (M\+IT). 