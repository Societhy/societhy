
\begin{DoxyItemize}
\item Significantly optimized all iteration based collection methods such as {\ttfamily each}, {\ttfamily map}, {\ttfamily filter}, etc (\#1245, \#1246, \#1247).
\end{DoxyItemize}

\section*{v2.\+0.\+0}

Lots of changes here!

First and foremost, we have a slick new \href{https://caolan.github.io/async/}{\tt site for docs}. Special thanks to \href{https://github.com/hargasinski}{\tt {\bfseries }} for his work converting our old docs to {\ttfamily jsdoc} format and implementing the new website. Also huge ups to \href{https://github.com/ivanseidel}{\tt {\bfseries }} for designing our new logo. It was a long process for both of these tasks, but I think these changes turned out extraordinary well.

The biggest feature is modularization. You can now {\ttfamily require(\char`\"{}async/series\char`\"{})} to only require the {\ttfamily series} function. Every Async library function is available this way. You still can {\ttfamily require(\char`\"{}async\char`\"{})} to require the entire library, like you could do before.

We also provide Async as a collection of E\+S2015 modules. You can now {\ttfamily import \{each\} from \textquotesingle{}async-\/es\textquotesingle{}} or {\ttfamily import waterfall from \textquotesingle{}async-\/es/waterfall\textquotesingle{}}. If you are using only a few Async functions, and are using a ES bundler such as Rollup, this can significantly lower your build size.

Major thanks to \href{github.com/Kikobeats}{\tt {\bfseries }}, \href{github.com/aearly}{\tt {\bfseries }} and \href{github.com/megawac}{\tt {\bfseries }} for doing the majority of the modularization work, as well as \href{github.com/jdalton}{\tt {\bfseries }} and \href{github.com/Rich-Harris}{\tt {\bfseries -\/\+Harris}} for advisory work on the general modularization strategy.

Another one of the general themes of the 2.\+0 release is standardization of what an \char`\"{}async\char`\"{} function is. We are now more strictly following the node-\/style continuation passing style. That is, an async function is a function that\+:


\begin{DoxyEnumerate}
\item Takes a variable number of arguments
\item The last argument is always a callback
\item The callback can accept any number of arguments
\item The first argument passed to the callback will be treated as an error result, if the argument is truthy
\item Any number of result arguments can be passed after the \char`\"{}error\char`\"{} argument
\item The callback is called once and exactly once, either on the same tick or later tick of the Java\+Script event loop.
\end{DoxyEnumerate}

There were several cases where Async accepted some functions that did not strictly have these properties, most notably {\ttfamily auto}, {\ttfamily every}, {\ttfamily some}, and {\ttfamily filter}.

Another theme is performance. We have eliminated internal deferrals in all cases where they make sense. For example, in {\ttfamily waterfall} and {\ttfamily auto}, there was a {\ttfamily set\+Immediate} between each task -- these deferrals have been removed. A {\ttfamily set\+Immediate} call can add up to 1ms of delay. This might not seem like a lot, but it can add up if you are using many Async functions in the course of processing a H\+T\+TP request, for example. Nearly all asynchronous functions that do I/O already have some sort of deferral built in, so the extra deferral is unnecessary. The trade-\/off of this change is removing our built-\/in stack-\/overflow defense. Many synchronous callback calls in series can quickly overflow the JS call stack. If you do have a function that is sometimes synchronous (calling its callback on the same tick), and are running into stack overflows, wrap it with {\ttfamily async.\+ensure\+Async()}.

Another big performance win has been re-\/implementing {\ttfamily queue}, {\ttfamily cargo}, and {\ttfamily priority\+Queue} with \href{https://en.wikipedia.org/wiki/Doubly_linked_list}{\tt doubly linked lists} instead of arrays. This has lead to queues being an order of \href{https://github.com/caolan/async/pull/1205}{\tt magnitude faster on large sets of tasks}.

\subsection*{New Features}


\begin{DoxyItemize}
\item Async is now modularized. Individual functions can be {\ttfamily require()}d from the main package. (`require(\textquotesingle{}async/auto\textquotesingle{}){\ttfamily ) (\#984, \#996)}
\item {\ttfamily Async is also available as a collection of E\+S2015 modules in the new}async-\/es{\ttfamily package. (}import \{for\+Each\+Series\} from \textquotesingle{}async-\/es\textquotesingle{}{\ttfamily ) (\#984, \#996)}
\item {\ttfamily Added}race{\ttfamily , analogous to}Promise.\+race(){\ttfamily . It will run an array of async tasks in parallel and will call its callback with the result of the first task to respond. (\#568, \#1038)}
\item {\ttfamily Collection methods now accept E\+S2015 iterators. Maps, Sets, and anything that implements the iterator spec can now be passed directly to}each{\ttfamily ,}map{\ttfamily ,}parallel{\ttfamily , etc.. (\#579, \#839, \#1074)}
\item {\ttfamily Added}map\+Values{\ttfamily , for mapping over the properties of an object and returning an object with the same keys. (\#1157, \#1177)}
\item {\ttfamily Added}timeout{\ttfamily , a wrapper for an async function that will make the task time-\/out after the specified time. (\#1007, \#1027)}
\item {\ttfamily Added}reflect{\ttfamily and}reflect\+All{\ttfamily , analagous to \mbox{[}}Promise.\+reflect(){\ttfamily \mbox{]}(\href{http://bluebirdjs.com/docs/api/reflect.html}{\tt http\+://bluebirdjs.\+com/docs/api/reflect.\+html}), a wrapper for async tasks that always succeeds, by gathering results and errors into an object. (\#942, \#1012, \#1095) -\/}constant{\ttfamily supports dynamic arguments -\/-\/ it will now always use its last argument as the callback. (\#1016, \#1052) -\/}set\+Immediate{\ttfamily and}next\+Tick{\ttfamily now support arguments to partially apply to the deferred function, like the node-\/native versions do. (\#940, \#1053) -\/}auto{\ttfamily now supports resolving cyclic dependencies using \mbox{[}Kahn\textquotesingle{}s algorithm\mbox{]}(\href{https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm}{\tt https\+://en.\+wikipedia.\+org/wiki/\+Topological\+\_\+sorting\#\+Kahn.\+27s\+\_\+algorithm}) (\#1140).}
\item {\ttfamily Added}auto\+Inject{\ttfamily , a relative of}auto{\ttfamily that automatically spreads a task\textquotesingle{}s dependencies as arguments to the task function. (\#608, \#1055, \#1099, \#1100)}
\item {\ttfamily You can now limit the concurrency of}auto{\ttfamily tasks. (\#635, \#637)}
\item {\ttfamily Added}retryable{\ttfamily , a relative of}retry{\ttfamily that wraps an async function, making it retry when called. (\#1058) -\/}retry{\ttfamily now supports specifying a function that determines the next time interval, useful for exponential backoff, logging and other retry strategies. (\#1161) -\/}retry{\ttfamily will now pass all of the arguments the task function was resolved with to the callback (\#1231).}
\item {\ttfamily Added}q.\+unsaturated$<$tt$>$-\/-\/ callback called when aqueue{\ttfamily \textquotesingle{}s number of running workers falls below a threshold. (\#868, \#1030, \#1033, \#1034)}
\item {\ttfamily Added}q.\+error$<$tt$>$-\/-\/ a callback called whenever aqueue{\ttfamily task calls its callback with an error. (\#1170) -\/}apply\+Each{\ttfamily and}apply\+Each\+Series` now pass results to the final callback. (\#1088)
\end{DoxyItemize}

\subsection*{Breaking changes}


\begin{DoxyItemize}
\item Calling a callback more than once is considered an error, and an error will be thrown. This had an explicit breaking change in {\ttfamily waterfall}. If you were relying on this behavior, you should more accurately represent your control flow as an event emitter or stream. (\#814, \#815, \#1048, \#1050)
\item {\ttfamily auto} task functions now always take the callback as the last argument. If a task has dependencies, the {\ttfamily results} object will be passed as the first argument. To migrate old task functions, wrap them with \href{https://lodash.com/docs#flip}{\tt {\ttfamily \+\_\+.\+flip}} (\#1036, \#1042)
\item Internal {\ttfamily set\+Immediate} calls have been refactored away. This may make existing flows vulnerable to stack overflows if you use many synchronous functions in series. Use {\ttfamily ensure\+Async} to work around this. (\#696, \#704, \#1049, \#1050)
\item {\ttfamily map} used to return an object when iterating over an object. {\ttfamily map} now always returns an array, like in other libraries. The previous object behavior has been split out into {\ttfamily map\+Values}. (\#1157, \#1177)
\item {\ttfamily filter}, {\ttfamily reject}, {\ttfamily some}, {\ttfamily every}, and related functions now expect an error as the first callback argument, rather than just a simple boolean. Pass {\ttfamily null} as the first argument, or use {\ttfamily fs.\+access} instead of {\ttfamily fs.\+exists}. (\#118, \#774, \#1028, \#1041)
\item {\ttfamily \{M\+E\+T\+H\+OD\}} and {\ttfamily \{M\+E\+T\+H\+OD\}Series} are now implemented in terms of {\ttfamily \{M\+E\+T\+H\+OD\}Limit}. This is a major internal simplification, and is not expected to cause many problems, but it does subtly affect how functions execute internally. (\#778, \#847)
\item {\ttfamily retry}\textquotesingle{}s callback is now optional. Previously, omitting the callback would partially apply the function, meaning it could be passed directly as a task to {\ttfamily series} or {\ttfamily auto}. The partially applied \char`\"{}control-\/flow\char`\"{} behavior has been separated out into {\ttfamily retryable}. (\#1054, \#1058)
\item The test function for {\ttfamily whilst}, {\ttfamily until}, and {\ttfamily during} used to be passed non-\/error args from the iteratee function\textquotesingle{}s callback, but this led to weirdness where the first call of the test function would be passed no args. We have made it so the test function is never passed extra arguments, and only the {\ttfamily do\+Whilst}, {\ttfamily do\+Until}, and {\ttfamily do\+During} functions pass iteratee callback arguments to the test function (\#1217, \#1224)
\item The {\ttfamily q.\+tasks} array has been renamed {\ttfamily q.\+\_\+tasks} and is now implemented as a doubly linked list (D\+LL). Any code that used to interact with this array will need to be updated to either use the provided helpers or support D\+L\+Ls (\#1205).
\item The timing of the {\ttfamily q.\+saturated()} callback in a {\ttfamily queue} has been modified to better reflect when tasks pushed to the queue will start queueing. (\#724, \#1078)
\item Removed {\ttfamily iterator} method in favour of \href{https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators}{\tt E\+S2015 iterator protocol} which natively supports arrays (\#1237)
\item Dropped support for Component, Jam, S\+PM, and Volo (\#1175, \#\#176)
\end{DoxyItemize}

\subsection*{Bug Fixes}


\begin{DoxyItemize}
\item Improved handling of no dependency cases in {\ttfamily auto} \& {\ttfamily auto\+Inject} (\#1147).
\item Fixed a bug where the callback generated by {\ttfamily asyncify} with {\ttfamily Promises} could resolve twice (\#1197).
\item Fixed several documented optional callbacks not actually being optional (\#1223).
\end{DoxyItemize}

\subsection*{Other}


\begin{DoxyItemize}
\item Added {\ttfamily some\+Series} and {\ttfamily every\+Series} for symmetry, as well as a complete set of {\ttfamily any}/{\ttfamily any\+Limit}/{\ttfamily any\+Series} and {\ttfamily all}/{\ttfamily /all\+Lmit}/{\ttfamily all\+Series} aliases.
\item Added {\ttfamily find} as an alias for {\ttfamily detect. (as well as}find\+Limit{\ttfamily and}find\+Series`).
\item Various doc fixes (\#1005, \#1008, \#1010, \#1015, \#1021, \#1037, \#1039, \#1051, \#1102, \#1107, \#1121, \#1123, \#1129, \#1135, \#1138, \#1141, \#1153, \#1216, \#1217, \#1232, \#1233, \#1236, \#1238)
\end{DoxyItemize}

Thank you \href{github.com/aearly}{\tt {\bfseries }} and \href{github.com/megawac}{\tt {\bfseries }} for taking the lead on version 2 of async. 



\section*{v1.\+5.\+2}


\begin{DoxyItemize}
\item Allow using {\ttfamily \char`\"{}constructor\char`\"{}} as an argument in {\ttfamily memoize} (\#998)
\item Give a better error messsage when {\ttfamily auto} dependency checking fails (\#994)
\item Various doc updates (\#936, \#956, \#979, \#1002)
\end{DoxyItemize}

\section*{v1.\+5.\+1}


\begin{DoxyItemize}
\item Fix issue with {\ttfamily pause} in {\ttfamily queue} with concurrency enabled (\#946)
\item {\ttfamily while} and {\ttfamily until} now pass the final result to callback (\#963)
\item {\ttfamily auto} will properly handle concurrency when there is no callback (\#966)
\item {\ttfamily auto} will no. properly stop execution when an error occurs (\#988, \#993)
\item Various doc fixes (\#971, \#980)
\end{DoxyItemize}

\section*{v1.\+5.\+0}


\begin{DoxyItemize}
\item Added {\ttfamily transform}, analogous to \href{http://lodash.com/docs#transform}{\tt {\ttfamily \+\_\+.\+transform}} (\#892)
\item {\ttfamily map} now returns an object when an object is passed in, rather than array with non-\/numeric keys. {\ttfamily map} will begin always returning an array with numeric indexes in the next major release. (\#873)
\item {\ttfamily auto} now accepts an optional {\ttfamily concurrency} argument to limit the number o. running tasks (\#637)
\item Added {\ttfamily queue\+::workers\+List()}, to retrieve the lis. of currently running tasks. (\#891)
\item Various code simplifications (\#896, \#904)
\item Various doc fixes \+:scroll\+: (\#890, \#894, \#903, \#905, \#912)
\end{DoxyItemize}

\section*{v1.\+4.\+2}


\begin{DoxyItemize}
\item Ensure coverage files don\textquotesingle{}t get published on npm (\#879)
\end{DoxyItemize}

\section*{v1.\+4.\+1}


\begin{DoxyItemize}
\item Add in overlooked {\ttfamily detect\+Limit} method (\#866)
\item Removed unnecessary files from npm releases (\#861)
\item Removed usage of a reserved word to prevent \+:boom\+: in older environments (\#870)
\end{DoxyItemize}

\section*{v1.\+4.\+0}


\begin{DoxyItemize}
\item {\ttfamily asyncify} now supports promises (\#840)
\item Added {\ttfamily Limit} versions of {\ttfamily filter} and {\ttfamily reject} (\#836)
\item Add {\ttfamily Limit} versions of {\ttfamily detect}, {\ttfamily some} and {\ttfamily every} (\#828, \#829)
\item {\ttfamily some}, {\ttfamily every} and {\ttfamily detect} now short circuit early (\#828, \#829)
\item Improve detection of the global object (\#804), enabling use in Web\+Workers
\item {\ttfamily whilst} now called with arguments from iterator (\#823)
\item {\ttfamily during} now gets called with arguments from iterator (\#824)
\item Code simplifications and optimizations aplenty (\href{https://github.com/caolan/async/compare/v1.3.0...v1.4.0}{\tt diff})
\end{DoxyItemize}

\section*{v1.\+3.\+0}

New Features\+:
\begin{DoxyItemize}
\item Added {\ttfamily constant}
\item Added {\ttfamily asyncify}/{\ttfamily wrap\+Sync} for making sync functions work with callbacks. (\#671, \#806)
\item Added {\ttfamily during} and {\ttfamily do\+During}, which are like {\ttfamily whilst} with an async truth test. (\#800)
\item {\ttfamily retry} now accepts an {\ttfamily interval} parameter to specify a delay between retries. (\#793)
\item {\ttfamily async} should work better in Web Workers due to better {\ttfamily root} detection (\#804)
\item Callbacks are now optional in {\ttfamily whilst}, {\ttfamily do\+Whilst}, {\ttfamily until}, and {\ttfamily do\+Until} (\#642)
\item Various internal updates (\#786, \#801, \#802, \#803)
\item Various doc fixes (\#790, \#794)
\end{DoxyItemize}

Bug Fixes\+:
\begin{DoxyItemize}
\item {\ttfamily cargo} now exposes the {\ttfamily payload} size, and {\ttfamily cargo.\+payload} can be changed on the fly after the {\ttfamily cargo} is created. (\#740, \#744, \#783)
\end{DoxyItemize}

\section*{v1.\+2.\+1}

Bug Fix\+:


\begin{DoxyItemize}
\item Small regression with synchronous iterator behavior in {\ttfamily each\+Series} with a 1-\/element array. Before 1.\+1.\+0, {\ttfamily each\+Series}\textquotesingle{}s callback was called on the same tick, which this patch restores. In 2.\+0.\+0, it will be called on the next tick. (\#782)
\end{DoxyItemize}

\section*{v1.\+2.\+0}

New Features\+:


\begin{DoxyItemize}
\item Added {\ttfamily times\+Limit} (\#743)
\item {\ttfamily concurrency} can be changed after initialization in {\ttfamily queue} by setting {\ttfamily q.\+concurrency}. The new concurrency will be reflected the next time a task is processed. (\#747, \#772)
\end{DoxyItemize}

Bug Fixes\+:


\begin{DoxyItemize}
\item Fixed a regression in {\ttfamily each} and family with empty arrays that have additional properties. (\#775, \#777)
\end{DoxyItemize}

\section*{v1.\+1.\+1}

Bug Fix\+:


\begin{DoxyItemize}
\item Small regression with synchronous iterator behavior in {\ttfamily each\+Series} with a 1-\/element array. Before 1.\+1.\+0, {\ttfamily each\+Series}\textquotesingle{}s callback was called on the same tick, which this patch restores. In 2.\+0.\+0, it will be called on the next tick. (\#782)
\end{DoxyItemize}

\section*{v1.\+1.\+0}

New Features\+:


\begin{DoxyItemize}
\item {\ttfamily cargo} now supports all of the same methods and event callbacks as {\ttfamily queue}.
\item Added {\ttfamily ensure\+Async} -\/ A wrapper that ensures an async function calls its callback on a later tick. (\#769)
\item Optimized {\ttfamily map}, {\ttfamily each\+Of}, and {\ttfamily waterfall} families of functions
\item Passing a {\ttfamily null} or {\ttfamily undefined} array to {\ttfamily map}, {\ttfamily each}, {\ttfamily parallel} and families will be treated as an empty array (\#667).
\item The callback is now optional for the composed results of {\ttfamily compose} and {\ttfamily seq}. (\#618)
\item Reduced file size by 4kb, (minified version by 1kb)
\item Added code coverage through {\ttfamily nyc} and {\ttfamily coveralls} (\#768)
\end{DoxyItemize}

Bug Fixes\+:


\begin{DoxyItemize}
\item {\ttfamily forever} will no longer stack overflow with a synchronous iterator (\#622)
\item {\ttfamily each\+Limit} and other limit functions will stop iterating once an error occurs (\#754)
\item Always pass {\ttfamily null} in callbacks when there is no error (\#439)
\item Ensure proper conditions when calling {\ttfamily drain()} after pushing an empty data set to a queue (\#668)
\item {\ttfamily each} and family will properly handle an empty array (\#578)
\item {\ttfamily each\+Series} and family will finish if the underlying array is modified during execution (\#557)
\item {\ttfamily queue} will throw if a non-\/function is passed to {\ttfamily q.\+push()} (\#593)
\item Doc fixes (\#629, \#766)
\end{DoxyItemize}

\section*{v1.\+0.\+0}

No known breaking changes, we are simply complying with semver from here on out.

Changes\+:


\begin{DoxyItemize}
\item Start using a changelog!
\item Add {\ttfamily for\+Each\+Of} for iterating over Objects (or to iterate Arrays with indexes available) (\#168 \#704 \#321)
\item Detect deadlocks in {\ttfamily auto} (\#663)
\item Better support for require.\+js (\#527)
\item Throw if queue created with concurrency {\ttfamily 0} (\#714)
\item Fix unneeded iteration in {\ttfamily queue.\+resume()} (\#758)
\item Guard against timer mocking overriding {\ttfamily set\+Immediate} (\#609 \#611)
\item Miscellaneous doc fixes (\#542 \#596 \#615 \#628 \#631 \#690 \#729)
\item Use single noop function internally (\#546)
\item Optimize internal {\ttfamily \+\_\+each}, {\ttfamily \+\_\+map} and {\ttfamily \+\_\+keys} functions. 
\end{DoxyItemize}