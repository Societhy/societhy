Replaces strings on files by using string or regex patterns. Attempts to be a \href{http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11}{\tt String.\+prototype.\+replace} adapter task for your grunt project.

\subsection*{Getting Started}

This plugin requires node {\ttfamily $>$= 0.\+10.\+0}, Grunt {\ttfamily $>$= 0.\+4.\+0} and npm {\ttfamily $>$= 1.\+4.\+15} (latest stable is recommended).

If you haven\textquotesingle{}t used \href{http://gruntjs.com/}{\tt Grunt} before, be sure to check out the \href{http://gruntjs.com/getting-started}{\tt Getting Started} guide, as it explains how to create a \href{http://gruntjs.com/sample-gruntfile}{\tt Gruntfile} as well as install and use Grunt plugins. Once you\textquotesingle{}re familiar with that process, you may install this plugin with this command\+:


\begin{DoxyCode}
npm install grunt-string-replace --save-dev
\end{DoxyCode}


Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of Java\+Script\+:


\begin{DoxyCode}
grunt.loadNpmTasks('grunt-string-replace');
\end{DoxyCode}


{\itshape If you\textquotesingle{}re still using grunt v0.\+3.\+x it\textquotesingle{}s strongly recommended that \href{http://gruntjs.com/upgrading-from-0.3-to-0.4}{\tt you upgrade}, but in case you can\textquotesingle{}t please use \href{https://github.com/eruizdechavez/grunt-string-replace/tree/0.1.1-1}{\tt v0.\+1.\+1-\/1}.}

\subsection*{Configuration}

Inside your {\ttfamily Gruntfile.\+js} file add a section named {\ttfamily string-\/replace}. This section specifies the files to edit, destinations, patterns and replacements.

\subsubsection*{Parameters}

\paragraph*{files {\ttfamily object}}

Defines what files this task will edit. Grunt itself has very powerful \href{http://gruntjs.com/configuring-tasks#files}{\tt abstractions}, so it is {\bfseries highly recommended} you understand the different ways to specify them. Learn more at \href{http://gruntjs.com/configuring-tasks#files}{\tt Gruntfile Files mapping}, some options incude compact format, files object format and files array format.

\paragraph*{options {\ttfamily object}}

Controls how this task operates and should contain key\+:value pairs, see options below.

\subparagraph*{options.\+save\+Unchanged {\ttfamily boolean}}

By default {\ttfamily true} this flag will instruct {\ttfamily grunt-\/string-\/replace} to copy the files on {\ttfamily options.\+replacements} patterns even if there are no replacing matches.

By setting this flag to {\ttfamily false} files that have not changed (no replacements done) will not be saved on the new location. This will speed up the task if there is a large number of files.

\subparagraph*{options.\+replacements {\ttfamily array}}

This option will hold all your pattern/replacement pairs. A pattern/replacement pair should contain key\+:value pairs containing\+:


\begin{DoxyItemize}
\item pattern {\ttfamily string} or {\ttfamily regex}
\item replacement {\ttfamily string}
\end{DoxyItemize}


\begin{DoxyCode}
options: \{
  replacements: [\{
    pattern: /\(\backslash\)/(asdf|qwer)\(\backslash\)//ig,
    replacement: '"$1"'
  \}, \{
    pattern: ',',
    replacement: ';'
  \}]
\}
\end{DoxyCode}


\subsubsection*{Notes}


\begin{DoxyItemize}
\item If the pattern is a string, only the first occurrence will be replaced, as stated on \href{http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11}{\tt String.\+prototype.\+replace}.
\item When using Grunt templates, be aware that some security checks are implemented by Lo\+Dash and may alter your content (mainly to avoid X\+SS). To avoid this, see the advanced example below.
\end{DoxyItemize}

\subsection*{Examples}

\subsubsection*{Multiple files and multiple replacements}


\begin{DoxyCode}
'string-replace': \{
  dist: \{
    files: \{
      'dest/': 'src/**',
      'prod/': ['src/*.js', 'src/*.css'],
    \},
    options: \{
      replacements: [\{
        pattern: /\(\backslash\)/(asdf|qwer)\(\backslash\)//ig,
        replacement: ''$1''
      \}, \{
        pattern: ',',
        replacement: ';'
      \}]
    \}
  \}
\}
\end{DoxyCode}


\subsubsection*{Simple inline content}


\begin{DoxyCode}
'string-replace': \{
  inline: \{
    files: \{
      'dest/': 'src/**',
    \},
    options: \{
      replacements: [
        // place files inline example
        \{
          pattern: '<script src='js/async.min.js'></script>',
          replacement: '<script><%= grunt.file.read('path/to/source/js/async.min.js') %></script>'
        \}
      ]
    \}
  \}
\}
\end{DoxyCode}


\subsubsection*{Using files\textquotesingle{} expand options}

For more details, see Grunt\textquotesingle{}s documentation about \href{http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically}{\tt dynamic files object}.


\begin{DoxyCode}
'string-replace': \{
  dist: \{
    files: [\{
      expand: true,
      cwd: 'src/',
      src: '**/*',
      dest: 'dist/'
    \}],
    options: \{
      replacements: [\{
        pattern: 'hello',
        replacement: 'howdy'
      \}]
    \}
  \}
\}
\end{DoxyCode}


\subsubsection*{Advanced inline}

Since grunt-\/string-\/replace is basically a wrapper of \href{http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11}{\tt String.\+prototype.\+replace} you can also provide a function as a replacement pattern instead of a string or a template; as a nice added bonus to using a replacement function, grunt-\/string-\/replace will provide 2 extra arguments apart from the ones documented in the link below\+: {\ttfamily src} and {\ttfamily dest}. To get more details about how to use a function as replacement pattern I recommend you to read \href{https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter}{\tt Specifying a function as a parameter}.

We will be reading file names from H\+T\+ML comments and use the paths later to fetch the content and insert it inside a resulting H\+T\+ML. Assuming the following setup\+:

{\itshape src/index.\+html}


\begin{DoxyCode}
content here
\end{DoxyCode}


{\itshape src/partials/header.\+html}


\begin{DoxyCode}
<html><head></head><body>
\end{DoxyCode}


{\itshape src/partials/footer.\+html}


\begin{DoxyCode}
</body></html>
\end{DoxyCode}


{\itshape Gruntfile.\+js}


\begin{DoxyCode}
'use strict';

module.exports = function (grunt) \{
  // Project configuration.
  grunt.initConfig(\{
    config: \{
      src: 'src/*.html'
      dist: 'dist/'
    \},
    'string-replace': \{
      dist: \{
        files: \{
          '<%= config.dist %>': '<%= config.src %>'
        \},
        options: \{
          replacements: [\{
            pattern: //ig,
            replacement: function (match, p1) \{
              return grunt.file.read(grunt.config.get('config.dist') + p1);
            \}
          \}]
        \}
      \}
    \}
  \});

  // These plugins provide necessary tasks.
  grunt.loadNpmTasks('grunt-string-replace');

  // Default task.
  grunt.registerTask('default', ['string-replace']);
\};
\end{DoxyCode}


After executing grunt we get the following\+:

{\itshape dist/index.\+html}


\begin{DoxyCode}
<html><head></head><body>
content here
</body></html>
\end{DoxyCode}


\subsection*{Contributing}

In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using \href{http://gruntjs.com/}{\tt grunt}.

\subsection*{Release History}

1.\+3.\+0
\begin{DoxyItemize}
\item Fix \#39, a typo in the documentation
\item Inject src and dest into the callback function when replacement is a function; this allows the replacement function to use the old and/or new file paths/names for further processing
\item Add total files modified and update file created logging to verbose. Contributed by \href{https://github.com/tHBp}{\tt t\+H\+Bp}
\end{DoxyItemize}

1.\+2.\+1
\begin{DoxyItemize}
\item Update project U\+R\+Ls
\item Update dependencies
\end{DoxyItemize}

1.\+2.\+0
\begin{DoxyItemize}
\item Add {\ttfamily save\+Unchanged} option to control weather unmodified files are saved or not.
\item Add iojs to Travis CI.
\end{DoxyItemize}

1.\+1.\+1
\begin{DoxyItemize}
\item Add Node.\+js v0.\+12 to Travis CI
\end{DoxyItemize}

1.\+1.\+0
\begin{DoxyItemize}
\item Update dependencies
\item Add new log and debug messages
\item Improved file handling; grunt-\/string-\/replace will not copy files that are not modified (no replacements executed). Contributed by \href{https://github.com/iabw}{\tt iabw}
\end{DoxyItemize}

1.\+0.\+0
\begin{DoxyItemize}
\item Update dependencies
\item Update R\+E\+A\+D\+M\+E.\+md
\item Well deserved bump to 1.\+0.\+0 (its been stable for long enough now)
\end{DoxyItemize}

0.\+2.\+8
\begin{DoxyItemize}
\item Added log message after file is succesfully created. Contributed by \href{https://github.com/donaldpipowitch}{\tt donaldpipowitch}
\item Do not report error if one of the replacements resolves to a folder
\end{DoxyItemize}

0.\+2.\+7
\begin{DoxyItemize}
\item External libraries are deprecated on Grunt 0.\+4.\+2
\begin{DoxyItemize}
\item Remove grunt.\+util.\+\_\+ as it is not really required
\item Replace grunt.\+util.\+async with async
\end{DoxyItemize}
\end{DoxyItemize}

0.\+2.\+6
\begin{DoxyItemize}
\item Update Getting Started section
\item Fix broken link to Gruntfile\textquotesingle{}s File section (\#18)
\end{DoxyItemize}

0.\+2.\+5
\begin{DoxyItemize}
\item Fix for \#16
\item Fix for Travis CI config file
\item Added error handling to finish the task if something did not work as expected instead of just fail silently
\item Updated dev dependencies to latest stable versions
\end{DoxyItemize}

0.\+2.\+4
\begin{DoxyItemize}
\item Asynchronously loop files. Original idea contributed by \href{https://github.com/maxnachlinger}{\tt maxnachlinger}
\item Inline replacing example on R\+E\+A\+D\+M\+E.\+md. Contributed by \href{https://github.com/willfarrell}{\tt willfarrell}
\end{DoxyItemize}

0.\+2.\+3
\begin{DoxyItemize}
\item Removed dependency with grunt-\/lib-\/contrib due to deprecation of \textquotesingle{}options\textquotesingle{} method in favor of Grunt\textquotesingle{}s \textquotesingle{}options\textquotesingle{} util.
\item Updated grunt-\/contrib-\/jshint version in package.\+json to 0.\+3.\+0
\item Updated grunt-\/contrib-\/watch version in package.\+json to 0.\+3.\+1
\item Updated grunt version in package.\+json to 0.\+4.\+1
\item Added Node.\+js v0.\+10 to Travis CI config file
\end{DoxyItemize}

0.\+2.\+2
\begin{DoxyItemize}
\item Added support to be used as npm module. Contributed by \href{https://github.com/thanpolas}{\tt thanpolas}.
\end{DoxyItemize}

0.\+2.\+1
\begin{DoxyItemize}
\item Updated dependencies for Grunt 0.\+4.\+0.
\end{DoxyItemize}

0.\+2.\+0
\begin{DoxyItemize}
\item Added Support for grunt 0.\+4.\+0. This version will not support grunt 0.\+3.\+x, if you need to use it then {\ttfamily npm install grunt-\/string-\/replace@0.\+1}.
\end{DoxyItemize}

0.\+1.\+1-\/1
\begin{DoxyItemize}
\item Added Clean task (and dev dependency) to remove test generated file before testing.
\item Added Sublime Text project files and test generated file to npm ignore list.
\end{DoxyItemize}

0.\+1.\+1
\begin{DoxyItemize}
\item Fix dependency with grunt-\/lib-\/contrib.
\end{DoxyItemize}

0.\+1.\+0-\/1
\begin{DoxyItemize}
\item Fixed a typo on package.\+json description.
\item Added a note about string pattern behavior.
\end{DoxyItemize}

0.\+1.\+0
\begin{DoxyItemize}
\item Initial release.
\end{DoxyItemize}

\subsection*{License}

Copyright (c) 2016 Erick Ruiz de Chavez. Licensed under the M\+IT license. 